-   åº”ç”¨åˆ†æ”¯ï¼š[211003_xfg_ApplicationActivityProcess](https://gitcode.net/KnowledgePlanet/Lottery/-/tree/211003_xfg_ApplicationActivityProcess)
-   è·¯ç”±ç»„ä»¶ï¼š[db-router-spring-boot-starterÂ `æ‰“åŒ…æœ€æ–°è·¯ç”±ç»„ä»¶åŒ…`](https://gitcode.net/KnowledgePlanet/db-router-spring-boot-starter)
-   æè¿°ï¼šåœ¨ application åº”ç”¨å±‚è°ƒç”¨é¢†åŸŸæœåŠ¡åŠŸèƒ½ï¼Œç¼–æ’æŠ½å¥–è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ï¼šé¢†å–æ´»åŠ¨ã€æ‰§è¡ŒæŠ½å¥–ã€è½åº“ç»“æœï¼Œè¿™å…¶ä¸­è¿˜æœ‰ä¸€éƒ¨åˆ†å¾…å®ç°çš„å‘é€ MQ æ¶ˆæ¯ï¼Œåç»­å¤„ç†ã€‚

ç›¸æ¿¡ä»¥æ²«ï¼šåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ï¼Œéœ€è¦ç”¨æˆ·å…ˆé¢†å–æ´»åŠ¨ï¼Œå†æŠ½å¥–çš„ï¼Ÿ è‡ªå·±è¿™è¾¹çœ‹åˆ°çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯æ‰“å¼€æ´»åŠ¨é¡µé¢ï¼Œç„¶åç‚¹å‡»æŠ½å¥–å°±å®Œäº†ã€‚æ²¡æœ‰é¢†å–æ´»åŠ¨çš„æ­¥éª¤å§ã€‚
å°å‚…å“¥Â å›å¤Â ç›¸æ¿¡ä»¥æ²«ï¼š1. **ç”¨æˆ·æ˜¯æ„ŸçŸ¥ä¸åˆ°çš„ï¼Œéƒ½ä¼šè¢«åŒ…è£…èµ·æ¥**ã€‚ç”¨æˆ·å°±æ„Ÿè§‰è‡ªå·±æ˜¯ç›´æ¥æŠ½å¥–è€Œå·²ã€‚ 2. **æä¾›ä¸€å±‚é¢†å–æ´»åŠ¨ï¼Œå¯ä»¥ç”ŸæˆæŠ½å¥–å•ã€‚å¦‚æœä¸€æ¬¡æŠ½å¥–æ‰§è¡Œå¤±è´¥ï¼Œè¿™ä¸ªæŠ½å¥–å•ä¹Ÿå¯ä»¥å‘èµ·é‡è¯•**ã€‚ 3. ç±»ä¼¼äºä½ åœ¨å•†åŸä¸‹å•åˆ°æ”¯ä»˜å‘è´§ï¼Œè¿™ä¸ªæ˜¯æ´»åŠ¨ä¸‹å•ï¼Œæ‰§è¡ŒæŠ½å¥–ï¼Œå¥–å“å‘è´§ã€‚
## ä¸€ã€å¼€å‘æ—¥å¿—
-   åˆ†åˆ«**åœ¨ä¸¤ä¸ªåˆ†åº“çš„è¡¨ lottery_01.user_take_activityã€lottery_02.user_take_activity ä¸­æ·»åŠ  state`ã€æ´»åŠ¨å•ä½¿ç”¨çŠ¶æ€ 0æœªä½¿ç”¨ã€1å·²ä½¿ç”¨ã€‘`Â çŠ¶æ€å­—æ®µ**ï¼Œè¿™ä¸ªçŠ¶æ€å­—æ®µç”¨äºå†™å…¥ä¸­å¥–ä¿¡æ¯åˆ° user_strategy_export_000~003 è¡¨ä¸­æ—¶å€™ï¼Œ**ä¸¤ä¸ªè¡¨å¯ä»¥åšä¸€ä¸ªå¹‚ç­‰æ€§çš„äº‹åŠ¡**ã€‚åŒæ—¶è¿˜éœ€è¦åŠ å…¥ strategy_id ç­–ç•¥IDå­—æ®µï¼Œç”¨äºå¤„ç†**é¢†å–äº†æ´»åŠ¨å•ä½†æ‰§è¡ŒæŠ½å¥–å¤±è´¥æ—¶ï¼Œå¯ä»¥ç»§ç»­è·å–åˆ°æ­¤æŠ½å¥–å•ç»§ç»­æ‰§è¡ŒæŠ½å¥–ï¼Œè€Œä¸éœ€è¦é‡æ–°é¢†å–æ´»åŠ¨**ã€‚_å…¶å®é¢†å–æ´»åŠ¨å°±åƒæ˜¯ä¸€ç§æ´»åŠ¨é•œåƒä¿¡æ¯ï¼Œå¯ä»¥åœ¨æ§åˆ¶å¹‚ç­‰åå¤ä½¿ç”¨_
-   åœ¨ lottery-application æ¨¡å—ä¸‹æ–°å¢ process åŒ…ç”¨äºæµç¨‹ç¼–æ’ï¼Œå…¶å®å®ƒä¹Ÿæ˜¯ service æœåŠ¡åŒ…æ˜¯å¯¹é¢†åŸŸåŠŸèƒ½çš„å°è£…ï¼Œå¾ˆè–„çš„ä¸€å±‚ã€‚é‚£ä¹ˆå®šä¹‰æˆ process æ˜¯æƒ³å¤§å®¶å¯¹æµç¨‹ç¼–æ’æœ‰ä¸ªæ¦‚å¿µï¼Œ**ä¸€èˆ¬è¿™ä¸€å±‚çš„å¤„ç†å¯ä»¥ä½¿ç”¨å¯è§†åŒ–çš„æµç¨‹ç¼–æ’å·¥å…·é€šè¿‡æ‹–æ‹½çš„æ–¹å¼ï¼Œå¤„ç†è¿™éƒ¨åˆ†ä»£ç çš„é€»è¾‘**ã€‚
-   å­¦ä¹ æœ¬ç« è®°å¾—æ›´æ–°åˆ†æ”¯ä¸‹çš„æœ€æ–°SQLè¯­å¥ï¼Œå¦å¤–æœ¬ç« èŠ‚è¿˜è¿å¸¦å¼•å…¥äº†éœ€è¦MQã€Workerçš„åœºæ™¯ï¼Œåç»­å¼€å‘åˆ°è¿™äº›åŠŸèƒ½çš„æ—¶å€™ï¼Œä¼šç»§ç»­å®Œå–„ã€‚

## äºŒã€ç¼–æ’æµç¨‹
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202305271835766.png)
-   æŠ½å¥–æ•´ä¸ªæ´»åŠ¨è¿‡ç¨‹çš„æµç¨‹ç¼–æ’ï¼Œä¸»è¦åŒ…æ‹¬ï¼š**å¯¹æ´»åŠ¨çš„é¢†å–ã€å¯¹æŠ½å¥–çš„æ“ä½œã€å¯¹ä¸­å¥–ç»“æœçš„å­˜æ”¾ï¼Œä»¥åŠå¦‚ä½•å¤„ç†å‘å¥–**ï¼Œå¯¹äºå‘å¥–æµç¨‹æˆ‘ä»¬è®¾è®¡ä¸ºMQè§¦å‘ï¼Œåç»­å†è¡¥å…¨è¿™éƒ¨åˆ†å†…å®¹ã€‚
-   ==å¯¹äºæ¯ä¸€ä¸ªæµç¨‹èŠ‚ç‚¹ç¼–æ’çš„å†…å®¹ï¼Œéƒ½æ˜¯åœ¨é¢†åŸŸå±‚å¼€å‘å®Œæˆçš„==ï¼Œè€Œåº”ç”¨å±‚åªæ˜¯åšæœ€ä¸ºç®€å•çš„ä¸”å¾ˆè–„çš„ä¸€å±‚ã€‚_å…¶å®è¿™å—ä¹Ÿå¾ˆç¬¦åˆç›®å‰å¾ˆå¤šä½ä»£ç çš„ä½¿ç”¨åœºæ™¯ï¼Œé€šè¿‡ç•Œé¢å¯è§†åŒ–æ§åˆ¶æµç¨‹ç¼–æ’ï¼Œç”Ÿæˆä»£ç _

## ä¸‰ã€å·¥ç¨‹æ”¹é€ 
### 1. é¢†å–æ´»åŠ¨å¢åŠ åˆ¤æ–­å’Œè¿”å›é¢†å–å•ID
**BaseActivityPartake#doPartake**
```java
@Override
public PartakeResult doPartake(PartakeReq req) {
    // 1. æŸ¥è¯¢æ˜¯å¦å­˜åœ¨æœªæ‰§è¡ŒæŠ½å¥–é¢†å–æ´»åŠ¨å•ã€user_take_activity å­˜åœ¨ state = 0ï¼Œé¢†å–äº†ä½†æŠ½å¥–è¿‡ç¨‹å¤±è´¥çš„ï¼Œå¯ä»¥ç›´æ¥è¿”å›é¢†å–ç»“æœç»§ç»­æŠ½å¥–ã€‘
    UserTakeActivityVO userTakeActivityVO = this.queryNoConsumedTakeActivityOrder(req.getActivityId(), req.getuId());
    if (null != userTakeActivityVO) {
        return buildPartakeResult(userTakeActivityVO.getStrategyId(), userTakeActivityVO.getTakeId());
    }
   
    // 5. æ’å…¥é¢†å–æ´»åŠ¨ä¿¡æ¯ã€ä¸ªäººç”¨æˆ·æŠŠæ´»åŠ¨ä¿¡æ¯å†™å…¥åˆ°ç”¨æˆ·è¡¨ã€‘
    Long takeId = idGeneratorMap.get(Constants.Ids.SnowFlake).nextId();
    Result grabResult = this.grabActivity(req, activityBillVO, takeId);
    if (!Constants.ResponseCode.SUCCESS.getCode().equals(grabResult.getCode())) {
        return new PartakeResult(grabResult.getCode(), grabResult.getInfo());
    }
    return buildPartakeResult(activityBillVO.getStrategyId(), takeId);
}
```
-   æ´»åŠ¨é¢†åŸŸä¸­ä¸»è¦æ˜¯é¢†å–æ´»åŠ¨æ–°å¢åŠ äº† `ç¬¬1æ­¥çš„æŸ¥è¯¢æµç¨‹` å’Œ `ä¿®æ”¹ç¬¬5æ­¥è¿”å›takeId`
-   **æŸ¥è¯¢æ˜¯å¦å­˜åœ¨æœªæ‰§è¡ŒæŠ½å¥–é¢†å–æ´»åŠ¨å•**ã€‚åœ¨SQLæŸ¥è¯¢å½“å‰æ´»åŠ¨IDï¼Œç”¨æˆ·æœ€æ—©é¢†å–ä½†æœªæ¶ˆè´¹çš„ä¸€æ¡è®°å½•ã€è¿™éƒ¨åˆ†ä¸€èˆ¬ä¼šæœ‰ä¸šåŠ¡æµç¨‹é™åˆ¶ï¼Œæ¯”å¦‚**æ˜¯å¦å¤„ç†æœ€å…ˆè¿˜æ˜¯æœ€æ–°é¢†å–å•**ï¼Œè¦æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡å®é™…åœºæ™¯è¿›è¡Œå¤„ç†ã€‘
-   this.grabActivity æ–¹æ³•ï¼Œç”¨æˆ·é¢†å–æ´»åŠ¨æ—¶ï¼Œ**æ–°å¢è®°å½•ï¼šstrategy_idã€state ä¸¤ä¸ªå­—æ®µ**ï¼Œè¿™ä¸¤ä¸ªå­—æ®µå°±æ˜¯**ä¸ºäº†å¤„ç†ç”¨æˆ·å¯¹é¢†å–é•œåƒè®°å½•çš„äºŒæ¬¡å¤„ç†æœªæ‰§è¡ŒæŠ½å¥–çš„é¢†å–å•**ï¼Œä»¥åŠstateçŠ¶æ€æ§åˆ¶äº‹åŠ¡æ“ä½œçš„å¹‚ç­‰æ€§ã€‚

### 2. åº“è¡¨åç§°å’Œå­—æ®µçš„å®Œå–„æ€§ä¿®æ”¹
-   æŒ‰ç…§åˆ†æ”¯ä¸‹çš„åº“è¡¨è¯­å¥é‡æ–°æ‰§è¡Œå³å¯ï¼Œä¸»è¦æ˜¯æ–°å¢åŠ äº†è¡¨ä¸­çš„å­—æ®µä»¥åŠä¿®æ”¹äº† user_strategy_export è¡¨åä¸º 000~003

## å››ã€æŠ½å¥–æ´»åŠ¨æµç¨‹ç¼–æ’

**cn.itedus.lottery.application.process.impl.ActivityProcessImpl**

```java
@Override
public DrawProcessResult doDrawProcess(DrawProcessReq req) {
    // 1. é¢†å–æ´»åŠ¨
    PartakeResult partakeResult = activityPartake.doPartake(new PartakeReq(req.getuId(), req.getActivityId()));
    if (!Constants.ResponseCode.SUCCESS.getCode().equals(partakeResult.getCode())) {
        return new DrawProcessResult(partakeResult.getCode(), partakeResult.getInfo());
    }
    Long strategyId = partakeResult.getStrategyId();
    Long takeId = partakeResult.getTakeId();

    // 2. æ‰§è¡ŒæŠ½å¥–
    DrawResult drawResult = drawExec.doDrawExec(new DrawReq(req.getuId(), strategyId, String.valueOf(takeId)));
    if (Constants.DrawState.FAIL.getCode().equals(drawResult.getDrawState())) {
        return new DrawProcessResult(Constants.ResponseCode.LOSING_DRAW.getCode(), Constants.ResponseCode.LOSING_DRAW.getInfo());
    }
    DrawAwardInfo drawAwardInfo = drawResult.getDrawAwardInfo();

    // 3. ç»“æœè½åº“
    activityPartake.recordDrawOrder(buildDrawOrderVO(req, strategyId, takeId, drawAwardInfo));

    // 4. å‘é€MQï¼Œè§¦å‘å‘å¥–æµç¨‹

    // 5. è¿”å›ç»“æœ
    return new DrawProcessResult(Constants.ResponseCode.SUCCESS.getCode(), Constants.ResponseCode.SUCCESS.getInfo(), drawAwardInfo);
}
```

-   æŒ‰ç…§æµç¨‹å›¾è®¾è®¡ï¼Œåˆ†åˆ«è¿›è¡Œï¼šé¢†å–æ´»åŠ¨ã€æ‰§è¡ŒæŠ½å¥–ã€ç»“æœè½åº“ã€å‘é€MQã€è¿”å›ç»“æœï¼Œè¿™äº›æ­¥éª¤çš„æ“ä½œã€‚å…¶å®è¿™å—çš„æµç¨‹å°±ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•äº†ï¼Œä¸»è¦æ˜¯ä¸²è”èµ·å„ä¸ªæŠ½å¥–æ­¥éª¤çš„æ“ä½œã€‚

## äº”ã€æµ‹è¯•éªŒè¯
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202305272121045.png)

**æµ‹è¯•ç‚¹**Â -Â `å¯è‡ªè¡ŒéªŒè¯ä¸€äº›åŠŸèƒ½ç‚¹ï¼Œå°½å¯èƒ½è¦†ç›–åˆ°ä½ åœ¨ç¼–ç è¿‡ç¨‹ä¸­çš„æ€è€ƒğŸ¤”`

1.  **æµ‹è¯•æ´»åŠ¨çŠ¶æ€ã€æ—¶é—´ã€åº“å­˜ä»¥åŠä¸ªäººé¢†å–æ¬¡æ•°è¶…é™æƒ…å†µä¸‹ï¼Œè¿”å›çš„çŠ¶æ€**
2.  **æµ‹è¯•ç”¨æˆ·é¢†å–æ´»åŠ¨æ‰§è¡ŒæŠ½å¥–å¤±è´¥ï¼Œå†å‘èµ·ä¸€æ¬¡æŠ½å¥–æ—¶ï¼Œè¯»å–åˆ°æœªè¢«æ‰§è¡Œçš„æŠ½å¥–å•**ã€‚_å¯ä»¥æŠŠæŠ½å¥–åçš„ç»“æœä¿¡æ¯åœ¨æ•°æ®åº“ä¸­åˆ æ‰ï¼Œåªä¿ç•™æŠ½å¥–å•ï¼ŒçŠ¶æ€è®¾ç½®ä¸º0_
3.  **ä¿®æ”¹ç”¨æˆ·å¯æŠ½å¥–æ¬¡æ•°ä¸ºå‰ä¸€ä¸ª**ï¼Œåˆ é™¤å…¶ä»–è®°å½•ä¿¡æ¯ï¼ŒéªŒè¯äº‹åŠ¡å›æ»š

**å•å…ƒæµ‹è¯•**

**cn.itedus.lottery.test.application.ActivityProcessTest**
```java
@RunWith(SpringRunner.class)
@SpringBootTest
public class ActivityProcessTest {

    private Logger logger = LoggerFactory.getLogger(ActivityProcessTest.class);

    @Resource
    private IActivityProcess activityProcess;

    @Test
    public void test_doDrawProcess() {
        DrawProcessReq req = new DrawProcessReq();
        req.setuId("fustack");
        req.setActivityId(100001L);
        DrawProcessResult drawProcessResult = activityProcess.doDrawProcess(req);

        logger.info("è¯·æ±‚å…¥å‚ï¼š{}", JSON.toJSONString(req));
        logger.info("æµ‹è¯•ç»“æœï¼š{}", JSON.toJSONString(drawProcessResult));
    }

}
```
-   è¿™é‡Œçš„ç”¨æˆ·IDã€æ´»åŠ¨å·ï¼Œä½ å¯ä»¥ä½¿ç”¨è‡ªå·±çš„ï¼Œæ–¹ä¾¿éªŒè¯å„ä¸ªæµç¨‹ã€‚

**æµ‹è¯•ç»“æœ**Â -Â `ä¿®æ”¹åº“è¡¨æ´»åŠ¨çŠ¶æ€ lottery.activity.state = 1 éæ´»åŠ¨ä¸­`
```java
08:20:42.183  INFO 8804 --- [           main] c.i.l.t.application.ActivityProcessTest  : è¯·æ±‚å…¥å‚ï¼š{"activityId":100001,"uId":"fustack"}
08:20:42.186  INFO 8804 --- [           main] c.i.l.t.application.ActivityProcessTest  : æµ‹è¯•ç»“æœï¼š{"code":"0001","info":"æ´»åŠ¨å½“å‰çŠ¶æ€éå¯ç”¨"}
```
**æµ‹è¯•ç»“æœ**Â -Â `ä¿®æ”¹åº“è¡¨æ´»åŠ¨çŠ¶æ€ lottery.activity.state = 5 æ´»åŠ¨ä¸­`Â ä¹Ÿä¿è¯å…¶ä»–æ—¶é—´èŒƒå›´ã€åº“å­˜å……è¶³
```java
08:22:59.745  INFO 9053 --- [           main] c.b.m.db.router.DBRouterJoinPoint        : æ•°æ®åº“è·¯ç”± dbIdxï¼š2 tbIdxï¼š0
08:23:00.138  INFO 9053 --- [           main] c.b.m.db.router.DBRouterJoinPoint        : æ•°æ®åº“è·¯ç”± dbIdxï¼š2 tbIdxï¼š0
08:23:00.159  INFO 9053 --- [           main] c.b.m.db.router.DBRouterJoinPoint        : æ•°æ®åº“è·¯ç”± dbIdxï¼š2 tbIdxï¼š0
08:23:00.284  INFO 9053 --- [           main] c.i.l.d.s.s.draw.impl.DrawExecImpl       : æ‰§è¡ŒæŠ½å¥–ç­–ç•¥ strategyIdï¼š10001ï¼Œæ— åº“å­˜æ’é™¤å¥–å“åˆ—è¡¨IDé›†åˆ awardListï¼š["1"]
08:23:00.299  INFO 9053 --- [           main] c.i.l.d.s.service.draw.AbstractDrawBase  : æ‰§è¡Œç­–ç•¥æŠ½å¥–å®Œæˆã€å·²ä¸­å¥–ã€‘ï¼Œç”¨æˆ·ï¼šfustack ç­–ç•¥IDï¼š10001 å¥–å“IDï¼š2 å¥–å“åç§°ï¼šiphone
08:23:00.302  INFO 9053 --- [           main] c.b.m.db.router.DBRouterJoinPoint        : æ•°æ®åº“è·¯ç”± dbIdxï¼š2 tbIdxï¼š0
08:23:00.310  INFO 9053 --- [           main] c.b.m.db.router.DBRouterJoinPoint        : æ•°æ®åº“è·¯ç”± dbIdxï¼š2 tbIdxï¼š0
08:23:00.354  INFO 9053 --- [           main] c.i.l.t.application.ActivityProcessTest  : è¯·æ±‚å…¥å‚ï¼š{"activityId":100001,"uId":"fustack"}
08:23:00.367  INFO 9053 --- [           main] c.i.l.t.application.ActivityProcessTest  : æµ‹è¯•ç»“æœï¼š{"code":"0000","drawAwardInfo":{"awardContent":"Code","awardId":"2","awardName":"iphone","awardType":1,"grantType":1,"strategyMode":2},"info":"æˆåŠŸ"}
```
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202305272121280.png)
-   è¿™æ˜¯æ­£å¸¸æƒ…å†µä¸‹çš„æŠ½å¥–æ‰§è¡Œç»“æœï¼Œæ´»åŠ¨æ—¶é—´å¯ç”¨ã€çŠ¶æ€å¯ç”¨ã€åº“å­˜å……è¶³ã€ä¸ªäººé¢†å–æ¬¡æ•°æœ‰å‰©ä½™

**æµ‹è¯•ç»“æœ**Â -Â `ä¿®æ”¹ lottery_02.user_take_activity_count.left_count å‰©ä½™æ¬¡æ•°ä¸ºå‰ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯å¢åŠ ä¸€ä¸ªã€‚è¿™æ ·åœ¨é¢†å–æ´»åŠ¨ï¼Œç”Ÿæˆçš„é¢†åŸŸé˜²é‡UUIDç­–ç•¥æ¬¡æ•°ï¼Œå°±ä¼šå‘ç”Ÿå†²çªï¼ŒéªŒè¯äº‹åŠ¡å›æ»š`
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202305272124875.png)
```java
08:30:44.857  INFO 9822 --- [           main] c.b.m.db.router.DBRouterJoinPoint        : æ•°æ®åº“è·¯ç”± dbIdxï¼š2 tbIdxï¼š0
08:30:45.253  INFO 9822 --- [           main] c.b.m.db.router.DBRouterJoinPoint        : æ•°æ®åº“è·¯ç”± dbIdxï¼š2 tbIdxï¼š0
08:30:45.273  INFO 9822 --- [           main] c.b.m.db.router.DBRouterJoinPoint        : æ•°æ®åº“è·¯ç”± dbIdxï¼š2 tbIdxï¼š0
08:30:45.365 ERROR 9822 --- [           main] c.i.l.d.a.s.p.impl.ActivityPartakeImpl   : é¢†å–æ´»åŠ¨ï¼Œå”¯ä¸€ç´¢å¼•å†²çª activityIdï¼š100001 uIdï¼šfustack

org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry 'fustack_100001_5' for key 'idx_uuid'
```
-   ä¿®æ”¹ left_count ä»`5æ¬¡`ä¿®æ”¹ä¸º`6æ¬¡`ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç”Ÿæˆä¸€ä¸ªè¡¨ user_take_activity.uuid ä¸º 'fustack_100001_5' çš„å”¯ä¸€å€¼ï¼Œè¿™æ ·å°±ä¼šå‘ç”Ÿç´¢å¼•å†²çªå›æ»šï¼Œé‚£ä¹ˆæ‰£å‡äº† user_take_activity_count.left_count æ¬¡æ•°å°±ä¼šæ¢å¤å›å»ã€‚

---

1.  æŒæ¡ application ä¸­æµç¨‹ç¼–æ’çš„æ“ä½œæ–¹å¼
2.  **å­¦ä¹ äº‹åŠ¡æ§åˆ¶ï¼Œå°¤å…¶æ˜¯åœ¨2ä¸ªè¡¨ä»¥ä¸Šï¼Œå¦‚ä½•ç”¨çŠ¶æ€ã€æ¬¡æ•°ç­‰å­—æ®µï¼Œä¿è¯å¹‚ç­‰æ€§**ã€‚_å°±åƒä½ çš„é“¶è¡Œå¡æç°ï¼Œè¦æœ‰é‡‘é¢æ‰£å‡ã€æµæ°´å•ï¼Œæ¥ä¿è¯äº‹åŠ¡æ€§_
3.  å­¦ä¹ å„ä¸ªåŠŸèƒ½èŒè´£åˆ†ç¦»ã€ä¸²è”ã€èšåˆçš„ä½¿ç”¨ï¼Œåœ¨ä»€ä¹ˆåœºæ™¯ä½¿ç”¨å“ªäº›å­—æ®µï¼Œä¸²è”è°ƒç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚