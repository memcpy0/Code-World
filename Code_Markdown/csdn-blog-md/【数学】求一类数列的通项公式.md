@[toc]

求数列的通项公式，靠着**列举->猜想->归纳法**这三板斧，是远远不够的。不过我们能归纳总结出一类常见题型的解法——假设一种简单的递推关系，给出它的递推式如下，要求通项公式：
$$a_n = f(n) a_{n-1} + g(n)$$ 

我们针对 $f(n), g(n)$ 的类型进行分类讨论：
- $f(n)$ 为**常函数**，即某**常数** $p$ 
	- $p = 1$ ，用**累加法**
	- $p \ne 1$ 
		- $g(n)$ 非指数函数，用**构造法**
			- $g(n)$ 为**常函数**，即某**常数** $q$ 
			- $g(n)$ 为**一次函数**
			- $g(n)$ 为**二次函数**
		- $g(n)$ 为指数函数，用**同除法**
- $f(n)$ 不为**常函数**
	- $g(n) = 0$ ，用**累乘法**

---
# 1. $f(n)$ 为常数 $p$
当 $f(n) = p\ (p \in \R)$ 时，递推式变为：
$$a_n = pa_{n - 1} + g(n)$$
## 1.1 $p = 1$
当 $p = 1$ 时，递推式变为：
$$a_n = a_{n - 1} + g(n)$$

不难发现，相邻两项 $a_n, a_{n - 1}$ 之差为一个有规律的表达式 $g(n)$ 。我们可用**累加法**计算数列的通项公式，不论 $g(n)$ 是一个**常函数**还是**其他函数**。

【例1】已知 $a_n = a_{n - 1} + \dfrac{1}{n (n - 1)} \ (n > 1)$ ，$a_1 = 1$ ，求 $a_n$ 。
解：用**累加法**计算：
$$\begin{aligned}
a_n - a_{n - 1} &= \dfrac{1}{n (n - 1)} = \dfrac{1}{n-1}- \dfrac{1}{n} \\
a_{n - 1} - a_{n - 2} &= \dfrac{1}{ (n - 1)(n - 2)} = \dfrac{1}{n - 2}- \dfrac{1}{ n - 1}\\
&\dots \\
a_2 - a_1 &= \dfrac{1}{2} = 1 - \dfrac{1}{2}  
\end{aligned}
$$

将这一系列递推式的左右两边分别相加，得：
$$a_n - a_1 = 1 - \dfrac{1}{n}\ (n > 1)$$ 从而解得： $$a_n  = 2 - \dfrac{1}{n}$$

【例2】已知数列 $\{a_n\}$ ，$a_1 = -1$ ，$a_{n + 1}= a_n - 2^n\ (n \in \N^*)$ ，求 $a_n$ 。 
解：用**累加法**计算：
$$\begin{aligned}
a_{n } - a_{n - 1} &= - 2^{n-1}    \\
a_{n - 1} - a_{n - 2} &=-2^{n - 2}\\
&\dots \\
a_2 - a_1 &= -2^1 = -2  
\end{aligned}
$$


将这一系列递推式的左右两边分别相加，得：
$$a_n - a_1 = -(2^{n - 1} + 2^{n - 2} + \dots + 2) = 2 - 2^n\ (n >1)$$ 从而解得： $$a_n  = 1 -2^{n}$$
 
---
## 1.2 $p \ne 1$ 
现在讨论 $g(n)$ 的四种常见表示形式。
### 1.2.1 $g(n)$ 非指数函数，为某常数 $q$
当 $g(n) = q\ (q \in \R)$ 时，递推式变为：
$$a_n = pa_{n - 1} + q$$

我们可用**构造法**（即**不动点法**）求其通项，方法简略如下：
- 首先构造一个 $a_n + x = p(a_{n - 1} + x)$ ，解出 $x$ ；
- 再令 $b_n = a_n + x$ ，此时 $x$ 已知；
- 因此 $b_n = pb_{n - 1}$ ，数列 $\{ b_n\}$ 是首项为 $b_1 = a_1 + x$ 、公比为 $p$ 的等比数列；
- 解出 $b_n$ ，再代入 $b_n = a_n + x$ 即可得到 $a_n$ 表达式。

示例见[洛谷 P5743 【深基7.习8】猴子吃桃【递推/递归/数学】](https://memcpy0.blog.csdn.net/article/details/121332122)，以及求阿克曼函数 $m = 3$ 时 $f(3, n)$ 的通项公式。

### 1.2.2 $g(n)$ 非指数函数，为一次函数
当 $g(n) = qn+ s\ (q, s\in \R)$ 时，递推式变为：
$$a_n = p a_{n - 1} +qn+ s$$

此时仍可用**构造法**，方法与1.2.1类似，构造出 $a_n + xn + y = p(a_{n -1} + x(n - 1) + y)$ ，解出 $x, y$ ，得到等比数列 $\{b_n\}$ ，余下步骤相同。

### 1.2.3 $g(n)$ 非指数函数，为二次函数
当 $g(n) = qn^2 + sn + t\ (q, s, t\in \R)$ 时，递推式变为：
$$a_n = p a_{n - 1} +qn^2+ sn + t$$

此时仍可用**构造法**，方法与1.2.1类似，构造出 $a_n + xn^2 + yn  + z = p(a_{n -1} + x(n - 1)^2 + y(n - 1) + z)$ ，解出 $x, y, z$ ，得到等比数列 $\{b_n\}$ ，余下步骤相同。
### 1.2.4 $g(n)$ 为指数函数
当 $g(n) = q\lambda^n\ (q, \lambda \in \R)$ 时，递推式变为：
$$a_n = pa_{n - 1} + q\lambda^n$$

此时：
- 若 $p = \lambda$ ，即 $a_n = p a_{n - 1} +qp^n$ ，不能用构造法求解，而用**同除指数法**，令两边同时除以 $p^n$ ，得：
$$\dfrac{a_n}{p^n} = \dfrac{a_{n - 1}}{p^{n - 1}} + q$$
再令 $\dfrac{a_n}{p^n} = \mu_n$ ，可得 $\mu_n = \mu_{n - 1} + q$ 。进而用**累加法**求出数列 $\{ \mu_n\}$ 的通项公式，也就求出了数列 $\{a_n\}$ 的通项公式。

- 若 $p \ne \lambda$ ，既可用**构造法**，也可用**同除指数法**求出通项公式。构造法的步骤为——构造出 $a_n + x\lambda^n = p(a_{n - 1} + x\lambda^{n - 1})$ ，解出 $x$ 以构造等比数列，余下步骤相同。


---
# 2. $f(n)$ 不为常数
为了简便，只讨论 $g(n) = 0$ 时的情况。此时递推式为：
$$a_n = f(n) a_{n - 1}$$ 显然，前后两项之商为一个有规律的表达式 $f(n)$ ，于是可用**累乘法**求出通项公式。

注意，若 $f(n) = p$ ，则该数列为等比数列，其通项公式也是用累乘法得出来的。
