
<time datetime="2020-07-30T22:06:00+08:00" itemprop="datePublished">Published on Jul 30, 2020</time> in <a href="https://yukiyousa.cn/category/typecho/">Typecho相关</a> with <a href="#comments"> 0 comment</a>
</div>
</div>
<div id="post-content" class="post-content" itemprop="articleBody">
     <p class="post-tags">
         <a href="https://yukiyousa.cn/tag/typecho/">typecho</a> <a href="https://yukiyousa.cn/tag/%E6%95%99%E7%A8%8B/">教程</a>        </p>
<p>在大一入学前，我无意中发现了前辈学姐的博客，非常喜欢她博客的风格，也几乎翻看了她的每一篇博客，萌生了建立自己博客的想法 。首先我尝试了使用<code>hexo</code>搭建，但效果一般且比较麻烦，于是换成采用<code>typecho</code>搭建。<br><img src="https://yukiyousa.cn/usr/images/build/typecho.jpg" alt="typecho" title="typecho"></p><h1 id="directory0079878139259782151">前面的话</h1><p>个人博客可以帮助自己总结学习与生活，有兴趣的话快来参考教程搭建自己的博客吧！</p><blockquote><p>P.S. 从零到建站完成整个过程大概需要用8天</p></blockquote><h1 id="directory0079878139259782152">准备步骤</h1><h2 id="directory0079878139259782153">购买服务器</h2><h3 id="directory0079878139259782154">为什么要购买服务器</h3><p>服务器是建站的基础，是搭建博客的地基。我们个人电脑也可以通过iis作为服务器。但我们没有公网ip，我们的ip地址是内网ip，在个人电脑服务器搭建的网站想要被外网访问需要借助内网穿透。当然我们搭建博客不会用电脑做服务器，我们需要购买服务器。</p><h3 id="directory0079878139259782155">服务器的选择</h3><p>经过对比,我个人购买阿里云的服务器，选择云翼计划下的服务器。注册阿里云进行个人认证，24岁以下自动获得学生身份，ECS服务器一年需要114元（Intel Xeon 1核 + DDR4内存2G），链接: <a href="https://promotion.aliyun.com/ntms/act/campus2018.html" target="_blank">阿里云云翼计划</a> （阿里云快打钱啦）<br><img src="https://yukiyousa.cn/usr/images/build/1.jpg" alt="ECS" title="ECS"></p><h2 id="directory0079878139259782156">服务器基本配置</h2><p>成功购买服务器后，进入控制台，进入ECS实例列表，首先修改服务器的密码(一定要记清楚自己的密码！)<br><img src="https://yukiyousa.cn/usr/images/build/2.png" alt="实例列表" title="实例列表"><br>为了方便直接用了<a href="https://www.bt.cn/" target="_blank">宝塔镜像</a>，也可以自己安装LAMP或LNMP。在阿里云服务器上用宝塔镜像，步骤：【停止实例(不停止不能更换系统盘)】  &gt; 【更多】 &gt; 【磁盘和镜像】&gt;【更换系统盘】<br><img src="https://yukiyousa.cn/usr/images/build/3.png" alt="镜像" title="镜像"><br>进入更换页面后，镜像类型选择【镜像市场】，选择宝塔镜像即可（也可选别的厂商）</p><h2 id="directory0079878139259782157">修改安全组并放开端口</h2><p>在实例列表的页面，选择【更多】 &gt; 【网络和安全组】&gt; 【安全组配置】&gt; 【配置规则】<br>开放8888端口（宝塔管理界面默认端口）、888端口（宝塔phpmyadmin默认端口）、一些常用端口如80、443<br><img src="https://yukiyousa.cn/usr/images/build/4.png" alt="端口" title="端口"></p><h2 id="directory0079878139259782158">ssh连接进入宝塔面板</h2><p>下载ssh工具，以Xshell为例远程连接。【新建会话】 &gt; 输入主机外网ip，【用户身份验证】 &gt; 输入服务器用户名及密码(一定要记住！并和之后的进行区分)<br><img src="https://yukiyousa.cn/usr/images/build/5.png" alt="xshell" title="xshell"><br>连接上服务器后输入bt，修改用户名和密码。之后访问ip/8888进入宝塔面板登录界面，登录即可进入。<br><img src="https://yukiyousa.cn/usr/images/build/7.png" alt="bt" title="bt"></p><blockquote><p>最好在登入宝塔管理界面后，将默认端口按范围改为不常用的端口，记得改过之后重新在安全组放开该端口</p></blockquote><h2 id="directory0079878139259782159">购买域名及域名解析</h2><h3 id="directory00798781392597821510">购买域名</h3><p>域名，简单来说就是访问博客的链接，通过ip访问博客的方式难以记忆，我们需要购买自己的域名。通过阿里云选择域名:<a href="https://wanwang.aliyun.com/?spm=5176.12825654.eofdhaal5.9.3dbd2c4aYvnkSD" target="_blank">域名注册</a>，也可以在外网购买(就不用备案啦</p><h3 id="directory00798781392597821511">备案</h3><p>在阿里云购买域名过程中需要实名认证，实名认证后需要进行备案，可以通过阿里云APP方便操作。整个过程大概需要7步，大致7天，整个过程非常漫长~</p><h3 id="directory00798781392597821512">DNS解析</h3><p>DNS解析，简单来说就是解析域名和IP的对应关系。具体可参考<a href="https://blog.csdn.net/shaock2018/article/details/91358968" target="_blank">阿里云域名购买与DNS解析教程</a>。在cmd中输入<code>ping +域名  </code>，丢包率为0则解析成功~</p><h1 id="directory00798781392597821513">安装配置Typecho</h1><h2 id="directory00798781392597821514">通过宝塔面板建站</h2><p>输入ip/你设置的端口号，进入宝塔面板登录，安装<code>LNMP</code>。<br>进入【宝塔面板】 &gt; 【网站】 &gt; 【添加站点】,按照下图配置，注意记住数据库用户名和密码！<br><img src="https://yukiyousa.cn/usr/images/build/8.png" alt="建站" title="建站"></p><h2 id="directory00798781392597821515">Typecho安装与配置</h2><p>Typecho简约又轻量，单推Typecho！下载Typecho(链接：<a href="http://typecho.org/download" target="_blank">Typecho</a>)</p><p>下载完成，在本地解压，选择build文件夹并上传到服务器文件的<code>www/wwwroot/你的域名</code>目录中。<strong>将build文件夹中的所有文件剪切到</strong><code>www/wwwroot/你的域名</code><strong>目录下，然后删除build空文件！</strong></p><p>在浏览器输入<code>域名/install.php</code>，对Typecho进行基础配置：<br><img src="https://yukiyousa.cn/usr/images/build/9.png" alt="请输入图片描述" title="请输入图片描述"></p><blockquote><p>选择Mysql原生函数适配器，输入刚才设置的数据库用户名和密码，注册Typecho管理员用户名和密码，一定要记住呀！</p></blockquote><h1 id="directory00798781392597821516">后续工作</h1><h2 id="directory00798781392597821517">修改外观</h2><p>选择喜欢的外观模板，进入Typecho主题站(链接：<a href="https://typecho.me/" target="_blank">Typecho主题站</a>)</p><p>在Github下载zip后本地解压，上传到<code>www/wwwroot/你的域名/usr/themes</code>下，之后进入Typecho控制台修改</p><blockquote><p>若有-master后缀请删除！</p></blockquote><h2 id="directory00798781392597821518">设置伪静态</h2><p>目前的网址带有<code>index.php/</code>，我们需要设置伪静态简化网址。</p><p>进入宝塔【网站】 &gt; 【设置】&gt; 【伪静态】添加如下代码：</p><pre><code class="lang-php hljs"><span class="hljs-keyword">if</span> (!-e $request_filename) {
     rewrite ^(.*)$ /index.php$<span class="hljs-number">1</span> last;
 }</code></pre><p>进入Typecho控制台【设置】&gt; 【永久链接】强制启用地址重写。</p><h2 id="directory00798781392597821519">开启SSL</h2><p>可以直接通过宝塔申请SSL证书，也可以通过阿里云免费购买一个<a href="https://common-buy.aliyun.com/?spm=5176.15089375.5806769250.1.5ad412325oxSJB&amp;commodityCode=cas#/buy" target="_blank">阿里云云盾证书</a></p><blockquote><p>注意选免费的(家里有矿请无视</p></blockquote><p>申请SSL后，在证书列表中下载，然后选择你的服务器类型(默认选nginx)。找到<code>KEY</code> 和<code>PEM</code></p><p>进入宝塔【网站】 &gt; 【设置】&gt; 【SSL】对应添加<code>KEY</code> 和<code>PEM</code>，开启强制HTTPS后我们就发现网站有小绿锁啦！</p><blockquote><p>如果出现小绿锁，打开控制台，查看console，修改不安全的静态链接</p></blockquote>
