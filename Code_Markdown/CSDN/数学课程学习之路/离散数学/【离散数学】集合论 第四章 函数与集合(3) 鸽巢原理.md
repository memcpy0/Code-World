> 本文属于「离散数学」系列文章之一。这一系列着重于离散数学的学习和应用。由于内容随时可能发生更新变动，欢迎关注和收藏[离散数学系列文章汇总目录](https://memcpy0.blog.csdn.net/article/details/119997004)一文以作备忘。此外，在本系列学习文章中，为了透彻理解数学知识，本人参考了诸多博客、教程、文档、书籍等资料。以下是本文的不完全参考目录，在后续学习中还会逐渐补充：
> - （**国外经典教材**）离散数学及其应用 第七版 `Discrete Mathematics and Its Applications 7th` ，作者是 `Kenneth H.Rosen` ，袁崇义译，机械工业出版社
> - 离散数学 第二版，武波等编著，西安电子科技大学出版社，2006年
> - 离散数学 第三版，方世昌等编著，西安电子科技大学出版社，2013年
> - （经典参考书及其题解）离散数学/离散数学——理论•分析•题解，左孝凌、李为鉴、刘永才编著，上海科学技术文献出版社
> - 离散数学习题集：数理逻辑与集合论分册，耿素云；图论分册，耿素云；抽象代数分册， 张立昂。北京大学出版社

@[toc]

---
# 4.3 鸽巢定理
## 4.3.1 鸽巢原理及其推论
[**鸽巢定理**](https://en.wikipedia.org/wiki/Pigeonhole_principle) `pigeonhole principle` 又称为**抽屉原理**，是19世纪由德国数学家狄利克莱 `Dirichlet` 首先提出的。鸽巢原理虽然简单，但能够解决许多**存在性**的应用问题。

**定理4.3.1** 如果让 $m$ 只鸽子飞入 $n\ (n < m)$ 个鸽巢内，那么至少有一个鸽巢飞入两只或更多的鸽子。
**证明** （反证法）假设没有一个鸽巢中飞入两只或更多的鸽子，那么每个鸽巢中至多飞入一只鸽子，因此鸽子总数至多为 $n$ 只，这与鸽子总数 $m > n$ 矛盾。因此，至少有一个鸽巢中飞入两只或更多的鸽子。

用数学语言表述鸽巢原理就是：设 $X, Y$ 是任意两个**有限集合**，如果 $|X| > |Y|$ ，那么对于任意一个从 $X$ 到 $Y$ 的映射 $f$ ，必定存在 $x_1, x_2 \in X$ 使得 $f(x_1) = f(x_2)$ 。

我们可将以上的鸽巢原理推广为更一般的形式。

[**定理4.3.2**](https://en.wikipedia.org/wiki/Pigeonhole_principle#Strong_form) 设 $q_1, q_2, \dots q_n$ 是 $n$ 个正整数，如果有 $(q_1 + q_2 + \dots + q_n) + 1$ 只鸽子飞入编号为 $1, 2, \dots, n$ 的 $n$ 个鸽巢中，那么或者 $1$ 号鸽巢中飞入至少 $q_1 +1$ 只鸽子，或者 $2$ 号鸽巢中飞入至少 $q_2 +1$ 只鸽子，以此类推，或者 $n$ 号鸽巢中飞入至少 $q_n + 1$ 只鸽子。 
**证明** （反证法）假设对于所有 $i, 1 \le i \le n$ ，第 $i$ 号鸽巢飞入小于等于 $q_i$ 只鸽子，则 $n$ 只鸽巢中最多飞入 $q_1 + q_2 + \dots + q_n$ 只鸽子。这与现有的 $q_1 + q_2 + \dots + q_n+1$ 只鸽子矛盾。

**推论1** 如果 $mn+1$ 只鸽子飞入 $n$ 个鸽巢中，那么至少有一个鸽巢中飞入至少 $m + 1$ 只鸽子。
**推论2** 如果 $m$ 只鸽子飞入 $n$ 个鸽巢中，那么至少有一个鸽巢中飞入 $\lceil m / n \rceil$ 只鸽子。


学习过[单射、满射和双射](https://memcpy0.blog.csdn.net/article/details/120954526)，我们还有一种方式阐述有限集合上的鸽巢原理——如果 $A, B$ 是有限集合，且存在一个从 $A$ 到 $B$ 的满射不是单射，那么不存在从 $A$ 到 $B$ 的满射是单射，或者说，任何从 $A$ 到 $B$ 的满射都不是单射。

此外，我们还有[**鸽巢原理的概率论推广**](https://en.wikipedia.org/wiki/Pigeonhole_principle#Generalizations_of_the_pigeonhole_principle)和[**无限集合上的鸽巢原理**](https://en.wikipedia.org/wiki/Pigeonhole_principle#Infinite_sets)。

---
## 4.3.2 鸽巢原理的具体应用
【例1】任意 $367$ 个人中至少有 $2$ 人生日（出生的月和日）相同。
解：因为只有 $366$ 个可能的生日（即鸽巢），所以根据鸽巢原理，任意 $367$ 个人（即鸽子）中至少有两个人的生日相同。

【例2】证明：从 $1$ 到 $8$ 这八个整数中任意取 $5$ 个数，则至少有两个数之和等于 $9$ 。
证明：把 $1$ 到 $8$ 这八个数按两两一组，分为 $4$ 组 $\{1, 8\}, \{2 , 7\}, \{3, 6\}, \{4, 5\}$（即鸽巢）。任取 $5$ 个数（即鸽子），其中每个数都属于这 $4$ 个集合中的一个。由于只有 $4$ 个集合，因此根据鸽巢原理，至少有 $2$ 个数属于同一集合，这两者之和等于 $9$ 。

由上两例不难发现，**使用鸽巢原理的关键在于「确定鸽子和鸽巢及其数目」**。

【例3】证明：集合 $\{ 1, 2, 3, \dots, 30\}$ 中任取 $16$ 个不同的数，则一定有一个数是另一个数的倍数。
证明：解决这个问题的关键是，如何构造 $15$ 个或更少的鸽巢。我们将 $[1, 30]$ 这些数分别分配到不同的鸽巢中，令单个鸽巢中的所有数彼此之间存在整除关系。这样一来，任取集合中的 $16$ 个不同数，至少有两个来自同一个鸽巢，它们相互之间必能整除。

我们观察到 $\{1, 2, 3, \dots, 30\}$ 之间恰好有 $15$ 个奇数，而每个正整数 $n$ 均可唯一地写成 $n = 2^k\cdot m$ 的形式，其中整数 $k \ge 0$ ，$m$ 是奇数且称为 $n$ 的奇数部分。于是，我们构造出了以下 $15$ 个鸽巢：
$$\begin{aligned}
&A_1 = \{1, 2, 4, 8, 16\} \\
&A_2 = \{ 3, 6, 12, 24\} \\
&\dots  \\
&A_8  = \{ 15, 30\} \\
&A_9  = \{17\} \\
&\dots  \\
&A_{15} = \{ 29\} \\
\end{aligned}$$ 

当从 $1$ 到 $30$ 中任取 $16$ 个不同的数时，至少有两个数 $n_1, n_2$ 的奇数部分同为 $m$ ，令 $n_1 = 2^{k_1} \cdot m,\ n_2 = 2^{k_2} \cdot m$ 。若 $k_1 > k_2$ ，则 $n_1$ 是 $n_2$ 的倍数；否则 $n_2$ 是 $n_1$ 的倍数。

通过上述证明不难发现，从 $1, 2, \dots, n, n + 1, \dots, 2n$ 这连续的 $2n$ 个正整数中任取出 $n +1$ 个不同的数，则一定有一个数是另一个数的倍数。

【例4】证明：任意 $30$ 人中，总可以挑出 $5$ 个人出生在星期天。
证明：一个星期有 $7$ 天，这一问题相当于 $30$ 只鸽子飞入 $7$ 个鸽巢中。根据鸽巢原理及其推论，至少有 $\lceil 30 / 7\rceil = 5$ 个人出生在星期天。

【例5】设有**不同大小**的两个**同心圆盘**，每个圆盘均划分成 $100$ 个相同大小的扇形。现对大盘上任意 $50$ 个扇形上涂上黑色，另 $50$ 个扇形涂上白色。对小盘上的每个扇形随意涂上黑色或白色。假设每次旋转小盘停止后，小盘的每个小扇形恰好包含在大盘对应的一个扇形中。证明：存在一种旋转，在小盘停止后，小盘中至少有 $50$ 个扇形与包含它的大盘中对应扇形同色。
证明：两个同心圆盘如下图所示，当转动小盘时，（由于**大盘不动**）大盘和小盘之间存在 $100$ 种不同的位置组合（即**小盘每转动一个扇形，形成一种组合**）。由于大盘中的 $100$ 个扇形涂成黑色或白色的数目均为 $50$ ，对于小盘中的**每个扇形**，无论它涂成黑色还是白色，当它沿大盘转动一圈时，经过 **$100$ 个不同的位置**（即 $100$ 种不同的位置组合），一定恰在 **$50$ 个位置**上与包含它的大盘中的对应扇形同色。
<img src="https://img-blog.csdnimg.cn/3edb2f7735644f0989115076c585c7de.png#pic_center" width="55%">
因此，当小盘沿大盘转动一圈时，小盘中的 $100$ 个扇形与包含它的大盘中的对应扇形同色的情形共有 $100 \times 50 = 5000$ 次。把不同的位置组合视为鸽巢，共 $100$ 个，把大小盘扇形同色视为鸽子，共 $5000$ 只。于是据推论2可知，至少有一个鸽巢飞入 $\lceil 5000/100 \rceil = 50$ 只鸽子，即至少有一种位置组合使得小盘上有 $50$ 个扇形与包含它的大盘中的对应扇形同色。


