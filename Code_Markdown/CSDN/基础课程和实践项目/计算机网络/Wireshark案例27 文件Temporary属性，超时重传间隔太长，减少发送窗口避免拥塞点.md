有一次，我要把大批文件从 Windows 迁移到文件服务器（NAS）上，不
知道为什么有些文件就是过不去，报错信息也没有参考价值。走投无路之际，一
位美国同事提了个建议：我司在波士顿有一位很厉害的专家，也许可以请教一下
他。我抱着试一试的态度发了一封求助信，没想到十几分钟后就得到回复。专家
建议我抓一个网络包，然后用 Wireshark 看看这些文件有没有特殊属性。我立即
照办，果然在这些文件上看到 Temporary 属性。知道原因后，问题很快就解决了。
那是我第一次接触 Wireshark，而那位专家就是 Patrick。

**从此我就喜欢上了 Wireshark，因为它实在很有用，就像是学武之人得到了一
把称手好剑**。而 Patrick 却渐渐被我淡忘了。直到一年之后，我又遇到这样一个难
题：有一台文件服务器的读性能只有 10MB/s，远低于客户的期望。我尝试过很多
调优方式，性能却只降不升。徒劳三天之后，我对自己彻底失去信心。这时候我
又想起了 Patrick，说不定他能给点意见呢。于是我上传了一个网络包，请他帮忙
分析。一小时后奇迹再次出现，我收到了他的回信。信中提到两点建议。
- TCP 超时重传的间隔时间太长，设置一个较小的时间可以减少重传对性能的影响。
- 该网络频繁拥塞，拥塞点大多在 32KB 以上。如果把发送窗口限制在 32KB，就可以避免触碰拥塞点。

我简直不敢相信这些分析，短短一个小时怎么能看出这么深奥的原因？我好
歹也用了一年 Wireshark 了，几乎每个菜单都很熟悉，**却从来不知道有个地方可以看出拥塞点**。不过有了上次的成功经验，我决定还是尝试一下这两条建议。在
把超时重传时间减小之后，读性能立即达到 20MB/s，比之前提高了一倍。这个结
果实在太振奋人心，一扫三天来的阴霾。我赶紧再设置发送窗口，没想到性能又提高了一倍，达到 40MB/s。现场的工程师和客户都在欢呼，我在电话上也久久不能平静。这时候我才真正被 Patrick 的实力所震撼。觉得自己就像武侠小说中初涉
江湖的少年，一年前被深藏不露的大侠所救，却只看到好剑的厉害。一年后再次
身陷险境，看到大侠出招，才知道自己有眼不识泰山，恨不得立即磕头拜师。

**等到我学会在 Wireshark 上看拥塞窗口，已经是半年后的事了**。期间我重读
了 Richard Stevens 的《TCP/IP Illustrated》，遇到疑难就请教 Patrick。