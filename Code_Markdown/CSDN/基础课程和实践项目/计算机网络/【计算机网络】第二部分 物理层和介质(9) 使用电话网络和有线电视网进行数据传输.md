@[toc]

电话网 `telephone networks` 原来是为**语音通信**而设计的，由于**数据通信**的需要，导致**拨号调制解调器**的发明。因特网的出现带来数据高速的下载和上传的需要，但调制解调器速度还是太慢。电话公司增加一种**数字用户线路** `DSL` 新技术。==尽管拨号调制解调器现还仍旧存在全世界许多地方，但 `DSL` 已通过电话网提供快速接入因特网==。这里首先讨论**电话网的基本结构**，然后考察**如何使用拨号调制解调器和 `DSL` 技术，将这些网络接入因特网**。

有线网络 `cable networks` 本来是为了那些由于天然障碍（如山区）的用户不能接收到电视节目而设计的。后来，有线网络深受想要接收到较好信号的人们的欢迎。另外，**有线网络可通过微波连接，接入远程广播站**。==有线电视网 `Cable TV` 也可用本来为视频设计的某些通道，提供接入因特网的良好市场==。在讨论**有线网络基本结构**后，讨论**电缆调制解调器如何提供高速接入因特网的连接**。

---
# 9.1 电话网络
**电话网络使用电路交换技术**。电话网络起始于19世纪末。当时的整个网络，也就是**简易普通传统电话系统** `plain old telephone system, POTS` ，最初是一个<u>使用模拟信号传输语音</u>的模拟系统。随着计算机时代的到来，在 20世纪 80年代，电话网络除了传输语音以外，还<u>传输数据</u>。在接下来的十年里，电话网络经历了多次技术改进。==目前电话网络是一种数字和模拟共存的网络==。
## 9.1.1 主要组件
如图9.1所示，电话网络主要由三部分构成：**本地回路** `local loop` 、**干线** `trunk` 和**交换局** `switching offices` 。电话网络具有多级交换局，如**本地局** `end office` 、**中继局** `tandem office` 和**地区局** `regional office` 。
- ==**本地回路是电话网络的组成部分之一**，也就是将用户电话机连接到最近本地局或者本地中心局的双绞线==。用于语音传送时，本地回路的带宽是 $4000 \textrm{Hz} \ (4 \textrm{kHz})$ 。研究一下与每一个本地回路相关联的电话号码，是非常有意思的。一个本地电话号码的前三位确定其所属局，其他四位确定了本地回路编号。
- **干线是处理局间通信的传输介质**。一条干线通过多路复用，通常可以处理成百上千个连接。传输通常是通过光纤和卫星链路实现的。
- **交换局**。==为了避免在任何两个用户之间存在一条永久的物理链路，电话公司在交换局内安装有交换机==。一台交换机可以连接多条本地回路或者干线，并且允许在不同用户间建立连接。
![图9.1 电话系统](https://img-blog.csdnimg.cn/180dcebd2b8847f9ae06cff80e0bdd0d.png)
## 9.1.2 LATA
AT&T在1984年"解体"之后，整个美国划分为 $200$ 多个**本地接入和传送区域** `local access and transport area, LATA` 。从那以后，LATA的数量也有所增加。一个LATA可以是一个小城市地区或者大城市地区，小的州可能有一个单烛的LATA，而大的州可能有多个LATA。LATA的边界可能与州的边界交错，即LATA的一部分可能位于一个州，另一部分也可能位于另一个州。
### 1. LATA内部服务
LATA内部的**公用电信公司** `common carrier`（或称电话公司）提供的服务称为**LATA内部服务**，处理这些服务的运营商称为**本地交换电信公司** `local exchange carrier, LEC` 。

在1996年的电信法实施之前，LATA内部服务是授权给一个单独的运营商经营的。这是一种垄断经营。1996年以后，多个运营商可以提供 LATA内部的服务。1996年以前提供服务的运营商，占有电缆铺设系统（本地回路），称为**责任本地交换电信公司** `incumbent local exchange carrier, ILEC` ，提供服务的新运营商称为**竞争本地交换电信公司** `competitive local exchange carrier, CLEC` 。==为了避免增加新的电缆铺设费用，一致同意由ILEC继续提供主要服务，而CLEC在LATA内部可以提供其他服务，如移动电话服务、收费长途电话等==。图9.2说明了LATA及其交换局。
![图9 .2 LATA内部的交换局](https://img-blog.csdnimg.cn/0a76f2147bca41658a88ac7067eb7b0f.png)
**LATA内部的通信由本地局和中继局处理**。只使用一个交换局就能完成的呼叫是免费的，必须通过一个中继局（LATA内部的长途电话局）的呼叫是收费的。

### 2. LATA间的服务
LATA之间的服务由**跨区交换电信公司** `interexchange carrier, IXC` 处理，这些公司有时称为**长途电话公司** `long-distance company` ，为不同LATA的两个客户之间提供通信服务。

1996年电信法实施以后，这些服务可以由任何电信公司提供，包括那些在LATA内部提供服务的电信公司，这个领域是完全开放的。提供LATA 间服务的电信公司包括AT&T、MCI WorldCom、 Sprint和Verizon。

IXC是长途电话公司，它们提供包括电话服务在内的**通用数据通信服务**。通过IXC的电话呼叫通常被数字化处理，电信公司使用多种类型的网络提供这一服务。

### 3. 服务接入点
前面讨论过，LATA内部服务可以由多个 `LEC`（一个 `ILEC` 和多个`CLEC`）提供，还提到过，LATA之间的服务可以由多个 `IXC` 提供。这些电信公司之间如何交互呢？答案是由称为**服务接入点** `Points of Presence, POP` 的交换局来完成交互。**所有希望在LATA中提供LATA间服务的 `IXC` ，都必须在该LATA内有一个 `POP`** 。==在LATA内部提供服务的 `LEC` ，必须提供连接，以使每个用户都能访问到所有的 `POP`== 。图9.3说明了这一概念。
![图9.3 服务接入点（POP）](https://img-blog.csdnimg.cn/28fff570cfc84d76b294ce9de8c2ef0c.png)
当一个用户需要与另一个用户建立连接时，首先被连接到本地交换机，然后直接连接到一个 `POP` ，或者通过一台中继交换机连接到 `POP` 。这时，呼叫从源LATA中的 `lXC`（用户选择的）的 `POP` ，到达目的LATA中的同一 `IXC` 的 `POP` 。呼叫将会通过 `IXC` 的长途电话局，井且经过 `IXC` 提供的网络进行传送。
## 9.1.3 信令
在早期，电话网络采取「**具有专用链路** `dedicated
links`（复用还没有发明）**的电路交换方式**」传输语音。正如[【计算机网络】第二部分 物理层和介质(8) 交换](https://blog.csdn.net/myRealization/article/details/122158560)所见，电路交换网在通信双方之间，为了确定与终止路径，必须有建立阶段与拆除阶段。
- 在初期，这项交换工作由接线员 `operator` 人工完成，接线员工作室是连接所有用户的中心。一个用户想要与另一个用户通话，拿起话筒（摘机 `off-hook` ）振铃通知接线员。接线员听到呼叫方并知道被呼叫方后，由接线员利用两塞绳 `a wire with two plugs` 插入对应两个插座进行连接，用这种方式建立一条专用电路。双方中某一方在通话结束后，通知接线员拆除电路。==由于信令和通话是同一电路，因此这种类型的信令称为**带内信令**== `in-band signaling` 。
- 后来，信令系统成为自动系统。发明了旋转拨号电话 `rotary telephones` ，发送数字信号表示多位数字电话机上每个数字。电话公司的交换机，用该数字信号建立呼叫方与被呼叫方之间的连接，同时使用带内信令和**带外信令** `out-of-signaling` 。==在带内信令中，$4 \textrm{kHz}$ 语音通道也用于提供信令；在带外信令中，部分语音通道用作信令。语音通道的带宽与信令通道的带宽是分离的==。

当电话网络发展成一个复杂的网络肘，信令系统的功能也有所增加。要求信令系统执行其他一些任务，比如：
1. 提供拨号音、振铃和忙音；
2. 办公室电话号码转移；
3. 维护和监控呼叫；
4. 保留账单信息；
5. 维护和监控电话网络设备；
6. 提供其他功能，如呼叫方ID和语音信箱等。

**这些复杂的任务要求我们为信令提供一个单独的网络**。这就是说，==目前电话网络可认为是两个网络：信令网络和数据传输网络==。数据传输和信令任务在现代电话网中是分开的：一个网络用来执行数据传输，另一个用来执行信令任务。可是，在此处我们需要强调一点，==虽然两个网络是分开的，但不是每处都存在独立的物理链路，两个网络可用系统部分中同一链路的不同通道==。
### 1. 数据传输网络
目前，可携带多媒体信息的数据传输网络，最重要的部分是电路交换网，尽管它也可能是分组交换网。这种网络如同讨论的其他网络一样，遵照相同的模型和协议。
### 2. 信令网络
本节主要关心的**信令网络是包含层次的分组交换网** `packet-switching
network` ，层次与[【计算机网络】第一部分 概述(2) 网络模型（OSI和TCP/IP模型）]()中讨论的OSI模型和因特网模型的层次相似。**信令的特性更适合具有不同层次的分组交换网**。例如，传递电话地址所需的信息，可封装在一个具有所有差错控制和寻址信息的分组中。图9.4表示了电话网的一个简化情形，其中两个网络是分开的。
![图9.4 数据传输网络和信令网络](https://img-blog.csdnimg.cn/03bf6a8ab905432eb6aff39def581702.png)
用户电话或计算机被连接到信号点 `signal point, SP` ，电话机与信号点之间的链路是**两个网络公用的**。信令网络利用称为**信号传输端口** `signal transfer port, STP` 接收或转发信令报文。信令网络也包括**服务控制点** `service control point, SCP` 以控制所有的网络操作。还可以包括诸如数据库中心之类的其他系统，以提供关于整个信令网络的被存储信息 `stored information` 。

### 3. $7$ 号信令系统
信令系统所用的协议称为**7号信令系统** `Signaling System Seven, SS7` ，它与5层因特网模型很相似，但每层有不同名字，如图9.5所示。
- 物理层：称为**报文传输部分层次1** `message transfer part level1, MTP1` ，使用物理层规范，例如像T-1线（$1.544\textrm{Mbps}$）和DC0（$64\textrm{kbps}$）。
- 数据链路层：**报文传输部分层次2** `message transfer part level1, MTP2` ，提供典型的数据链路层服务，如使用分组 `packetizing` 、在分组头部使用源和目的地址 `using source and destination address in the packet
header` 以及差错检测的CRC `CRC for error checking` 。
- 网络层：**报文传输部分层次3** `message transfer part level1, MTP3` ，通过使用**数据报交换**，提供端到端连接。路由器和交换机将信号包从源路由到目的地。
- 传输层：**信令连接控制点** `signaling connection control point, SSCP` ，用于特殊业务，如800呼叫处理。
- 高层：`TUP, TCAP, ISUP` 。在高层有 $3$ 个协议。**电话用户端口协议** `telephone user port, TUP` 负责建立语音呼叫，它接收拨号数字和按指定路线传送呼叫。**事务处理能力应用端口协议** `transaction capabilities application port, TCAP` 提供远程呼叫，让一台计算机上的应用程序调用另一台计算机的过程。**ISDN用户端口协议** `lSDN user port, ISUP` 代替 `TUP` 提供类似 `ISDN` 网络的服务。
![图9.5 SS7的层次模拟业务](https://img-blog.csdnimg.cn/f3d72828e96a4d668eaee4c44cacd88f.png)

## 9.1.4 电话网络提供的业务
电话公司提供两类业务：**模拟业务**和**数字业务**。
### 1. 模拟业务
从很早开始，电话公司就为它们的用户提供模拟业务。这些业务一直延续到今天。这些业务可以分为两类：**模拟交换业务** `analog switched service` 和**模拟租用业务** `analog leased service` 。
#### (1) 模拟交换业务
模拟交换业务是一种常见的拨号呼叫业务，在使用电话时经常遇到。**本地回路中的信号是模拟信号**，带宽通常为 $0\sim 4000\textrm{Hz}$ 。本地呼叫业务通常是按包月制收费形式提供的，但在有一些LATA中，运营商会按每次呼叫或者一组呼叫收费，==非包费制的合理性在于，为那些拨打电话较少的客户提供更廉价的服务==。服务可能是LATA内部的或LATA之间的。

如果LATA的地理分布很广，那么一次呼叫可能经过一个中继局（长途中心），用户就需要为这次呼叫付费。LATA间的呼叫是长途呼叫，也需要付费。

另一种业务称为 $800$ 业务 `800 service` ，如果一个用户（通常是一个组织机构）需要为其他用户（通常是客户）提供免费连接，它可以申请 $800$ 业务。在这种情况下，**呼叫方是免费的，但必须由被呼叫方付费**。组织机构使用这种服务来鼓励客户打电话。费用比正常的长途电话要便直一些。
#### (2) 广域电话业务
**广域电话业务** `wide-area telephone service, WATS` 是一种与 $800$ 相反的业务。后者是一种由组织机构付费的入站呼叫，而**前者是由组织机构付费的出站呼叫**。这种服务价格较低，可以替代常规的长途电话，收费是依据呼叫次数确定的。这种业务可以指定为出站呼叫到同一个州、到多个州或者到整个国家，并收取相应的费用。

#### (3) 900业务
与 $800$ 业务类似，都是用户入站呼叫。但是，与 $800$ 业务不同的是，**呼叫是由呼叫方付费的，而且通常比正常的长途电话要贵**。原因是运营商收取两种费用：第一种是长途电话费，第二种是付给被呼叫方的费用。

### 2. 模拟租用业务
**模拟租用业务** `analog leased service` 为客户提供租用一条线路的机会，这种线路有时称为**专线** `dedicated line` ，是永久性地连接到另一个客户的。==尽管连接仍然通过了电话网络中的交换机，但用户感觉它是条单一的线路==，因为交换机总是闲合的，不需要拨号。

### 3. 数字业务
近年来，电话公司开始为它们的用户提供数字业务 digital service） 。数字业务比起模拟业务，对噪声和其他形式的干扰的敏感度要低得多。两种最常见的数字业务是**交换式/56业务**和**数字数据业务** `digital data service, DDS` 。第6章已经讨论了高速数字服务，即 $T$ 线路，这里讨论其他服务。
#### (1) 交换式/56业务
**交换式/56业务** `switched/56 service` 是==模拟交换线路的数字版本==。它是一种交换式数字业务，允许数据速率最高到 $56\textrm{kbps}$ 。为了通过这一业务进行通信，**通信双方必须先预定这种业务**。==使用正常电话业务的呼叫方，不能使用交换式/56业务连接到一部电话或者计算机，即使使用了一台调制解调器也不行==。

总之，对电话公司而言，**模拟业务和数字业务表示两种完全不同的领域**。==由于交换式/56业务中使用的线路已经是数字化的，所以用户**不需要用调制解调器**来传输数字数据==。然而，用户需要另一种称为数字业务单 `digital service unit, DSU` 的设备。
#### (2) 数字数据业务
**数字数据业务** `digital data service, DDS` 是==模拟租用线路的数字版本==，它是一条最高数据速率为 $64\textrm{kbps}$ 的数字租用线路。

---
# 9.2 电话调制解调器
==传统的电话线路可以传送频率范围是 $300\sim 3300\textrm{Hz}$ 的信号，提供给信号的带宽是 $3000\textrm{Hz}$== 。整个频率范围用于传输语音，在不丢失可识别性的情况下，有一些干扰和失真是可以接受的。

但是我们已经看到，**数据信号需要更高等级的准确度，以确保完整性**。所以出于安全性原因，这一范围的边缘不能用于数据通信。通常情况下，可以说**信号带宽必须小于电缆带宽**。

用于数据传输的电话线路的有效带宽是 $2400\textrm{Hz}$ ，覆盖的频率范围是 $600 \sim 3000\textrm{Hz}$ 。注意：目前一些电话线路能够处理比传统线路更高的带宽。但是，**调制解调器的设计仍然是基于传统线路容量的**（见图9.6） 。
![图9.6 电话线路带宽](https://img-blog.csdnimg.cn/d8ca58a6b60c4bf4ac8fbd6d4c68bfda.png)
术语**调制解调器** `modem` 是一个复合词，源于组成设备的两个功能实体：**信号调制器**和**信号解调器**。**调制器** `modulator` 从二进制数据生成带通模拟信号，**解调器** `demodulator` 将调制信号恢复为二进制数据。调制解调器代表调制器/解调器。

图9.7说明了调制解调器与通信链路的关系。左侧的计算机发送数据到调制解调器的调制器部分，数据作为**模拟信号**在电话线路上发送。右侧的调制解调器接收到**模拟信号**，通过解调器解调，将数据分发给右侧的计算机。通信可以是双向的，表示右侧的计算机可以使用同一调制/解调过程向左侧的计算机发送数据。
![图9.7 调制器/解调器](https://img-blog.csdnimg.cn/5d44c09c6f0a4928ad23444d74e67f71.png)

目前，许多最流行的调制解调器都是基于ITU-T发布的 `V-series` 标准。我们只讨论最新的一系列标准。

## V.32和V.32bis 
V.32调制解调器**结合使用调制和编码技术**，称为**格码调制** `trellis-coded modulation` 。格式结构 `Trellis` 本质上是QAM加上一位冗余位。数据流划分为多个 $4$ 位部分。但是，**传输的是五位组 `pentable` 而不是四位组 `quadbit`** 。额外的位值从数据位值中计算得到，它用于差错检测。

V.32需要波特率为 $2400$ 的32-QAM，因为每个五位组只有 $4$ 位表示数据，所以最后所得到的速度为 $4\times 2 400 = 9 600\textrm{bps}$ 。星座图和带宽如图9.8所示。

==V.32bis调制解调器是第一个支持 $14400\textrm{bps}$ 传输的ITU-T标准==。V.32bis使用的是在波特率为 $2400$ 波特（$2400 \times 6= 14 400\textrm{bps}$）下的128-QAM传输（$7$ 位/波特，$1$ 位用于差错控制）。V.32bis提供的附加增强功能，包含了**传输速度自动降低和提高**等特性，使得调制解调器能够依据线路或者信号的质量，调高或者调低速度。星座图和带宽如图9.8所示。
![在这里插入图片描述](https://img-blog.csdnimg.cn/58eea8d779264c47be92ddb6066ff47a.png)
## V.34bis 
V.34bis调制解调器为 $28 800\textrm{bps}$ 的比特率提供了 $960$ 点的星座图，为 $33 600\textrm{bps}$ 的比特率提供了 $1664$ 点的星座图。
## V.90
传统的调制解调器的最大数据速率为 $33.6\textrm{kbps}$ ，如香农容量定理 $C=B\log_2​(1+SNR)$（[【计算机网络】第二部分 物理层和介质(3) 数据和信号](https://memcpy0.blog.csdn.net/article/details/122119955)）所确定的那样。

但是，比特率是 $56000\textrm{bps}$ 的V.90调制解调器，称为56K调制解调器 `56K modem` 已经可用了。==只有一方使用数字信号（如通过因特网提供商）时这些调制解调器才可用==。下载 `downloading` 速率与上载 `uploading` 速率是不对称的，下载速率（数据流从因特网提供商到PC）最大是 $56\textrm{kbps}$ ，上载速率（数据流从PC到因特网提供商）最大是 $33.6\textrm{kbps}$ 。这些调制解调器违反了香农容量原理吗？

不，在上传过程中，模拟信号要在交换站进行采样，在这个方向，**量化噪声（见第4章）引入信号、降低了信噪比**，将上载的数据速率限制为 $33.6\textrm{kbps}$ 。然而，==在下载过程中没有采样，信号不受量化噪声的影响，所以 $SNR$ 率较高==（见图9.9）。上载方向的最大数据速率仍然是 $33.6\textrm{kbps}$ ，但是下载方向的数据速率现在是 $56\textrm{kbps}$ 。

可能想知道，为什么是 $56\textrm{kbps}$ ？电话公司每秒采样 $8000$ 次，每个采样使用 $8$ 位。每一个采样的一位用于控制目的，意味着每个采样只有 $7$ 位。所以速率是 $8 000 \times 7 = 56 000\textrm{bps} = 56\textrm{kbps}$ 。
![图9.9 56K 调制解调器](https://img-blog.csdnimg.cn/67d13f648a974047939de2eae3ce803b.png)
>  下文出自[为什么调制解调器会有不同速度？](https://wap.sciencenet.cn/blog-309766-729701.html?mobile=1)
<b></b>
> 在选购调制解调器(modem)时，我们会注意到产品最重要的指标之一是速度。速度通常是以比特/秒（`bit/s`）或千比特/秒来度量的。例如，2千比特/秒或2000比特/秒表示调制解调器每秒钟能传送2000位二进制数。调制解调器的速度越快，我们上网或交换文件就越方便。大约二十年前调制解调器刚问世时，速度是300比特/秒。现在，市场上常见的是33.6千比特/秒和56千比特/秒.那么，调制解调器的速度是由什么决定的，在将来还会增加吗？
<b></b>
通讯所能达到的最大速度，是由发送和接收方之间的媒介（称为信道，`channel` ）决定的。比如我们说话，其沟通的速度就取决于我们能讲得多快（每分钟几个音节），和每个音节能表达多少意思。如果房间的回声很厉害，我们就不能讲得太快，否则前后发的音就会混在一起了。这种“回声”效应在通讯中用“频率响应”来度量。另一方面，如果周围的噪声很大而我们又不能再提高音量，那我们就应避免使用声音相近的音节，以免被听错。在通讯中，用“信噪比”来度量噪声对信号的影响。信道的频率响应和信噪比是影响通讯速度的重要参数。
<b></b>
当然，在同一个信道，通讯速度还与所用的方式有关。仍以说话为例，我们可以选择适当的表达方式，使得听者即使听错了一些音节，仍然能明白我们说的意思。这也许需要更多的音节来表达同样意思，但由于我们可接受一定的错误率，而减小了上面说到的信道影响，最终的通讯速度可能反而增加了。这在通讯中叫作编码技术。编码的好坏直接影响到通讯速度，而编码技术的选择又与信道特征密切相关。
> <b></b>
1918年，贝尔实验室的科学家香农创立了通讯的数学理论，其中提出了根据一个信道的频率相应和信噪比计算传输速度极限的方法。只有所用速度低于这个极限，我们才能无错误地传送数据。但是至今人们还没有达到这一极限的一般方法。对每一个具体的信道，我们必须找到适当的方法纠正信号传送中的失真，并通过编码来发现和纠正由于噪声造成的错误。随着这些技术的不断改进，数据传送的速度也就得以不断提高，从最初的300比特/秒到1200，2100，9600，11100，19200比特/秒等。对电话线来说，目前达到的33.6千比特/秒已经很接近香农极限了。
<b></b>
那么，我们又如何能超越香农极限而达到56千比特/秒的速度呢？这是利用了电话线路的特殊性。当今绝大多数的电话网络都是数字式的。用户的语音或调制解调器的信号都是连续变化的电压，称为模拟信号。在通常情况下，它通过普通的电话线（称为本地环）送到电话分局 `central office` 。在分局的数字交换机 `digital switching system` 上，这些电压被转换成数字信号（称为量化），再通过分局之间的数字网传到受话者所在的分局。在那里，这些数字信号再被还原成模拟信号，通过本地环传给受话者.上述的量化过程是不很精确的。在电话系统中，每个模拟信号只被量化成8位二进制数。也就是说，系统中有256（2的8次方）个预设的电压值，每个对应于一个8位数。量化时，交换机根据用户送来的模拟信号，送出与之最接近的预设值所对应的数字。而最终受话者得到的，就是这个预设值。所以，用户实际发送的电压与交换机所选预设值之间的差别就成了信道中的误差或噪声，称为量化噪声。这种设计对语音传送是比较理想的，但对传统的调制解调器（33.6千比特/秒）来说，**量化噪声就构成了信道噪声的主要来源**，从而限制了调制解调器的最高速度。
<b></b>
而56千比特/秒的技术则不同【注】。**这种技术要求通讯的一方直接接入数字电话网**，通常这是网络服务提供商ISP。而我们用户则通过本地环接入电话网。==在下传方向（从ISP到用户方向），发送方直接将数据送入数字电话网，而不经过量化，这样就没有量化噪声。用户的调制解调器，只要根据所收到的模拟信号判明分局交换机发送的是那一个预设值，就能得到所要接收的数据==。而在上传方向（用户到ISP），仍然要量化，所以也仍采用传统的技术，最大速度为31.2千比特/秒。因为大多数用户很少上传大的文件，这种非对称的安排是较合适的。
<b></b>
可见，我们之所以能在下传方向达到高速度，是因为**所用的信道与以前不同了**。这并不违反香农的理论。由于电话网内部给每个用户的容量是61千比特/秒，我们又需要牺牲一些速度来补偿本地环上的信道失真，56千比特/秒的速度也几乎达到了这种技术的极限。
<b></b>
需要注意的是**56千比特/秒的速度并不是随处都能达到的**。首先，**它只适用于对方是直接接入数字网的情形，而且只是在下传方向**。其次，在电话的数字和模拟线路中，有很多因素会使我们达不到最高速度。通常，能达到四十几千比特/秒就很不错了。相比之下，传统的调制解调器达到其最高速度的可能性比较大些。
<b></b>
由上所述，目前调制解调器的速度已接近电话系统能力的极限。再要进一步提高，**就需要使用语音以外的频率范围**，比如采用ISDN，DSL等技术。这些技术都需要在交换机一方变更目前的设备。
<b></b>
另外，用户要注意的是，调制解调器的标示速度并不等于实际的文件传送速度。首先，调制解调器会根据线路质量自动选择最优速度，并不总是使用最高速度。其次，网络其他部分的情况，如英特网的速度，ISP及被寻访站点的负荷，以及计算机与调制解调器之间接口的速度等，都会影响最终的传送速度。另外，所传送的文件的可压缩性也是一个重要因素。所以，要完全了解上网线路的性能，还需要很多细致的分析。
> <b></b>
【注】作者后记：这里说的是V.90标准的技术。后来还有V.92标准，上行和下行都采用类似的消除量化噪声的技术。但V.92在本文首发时尚未成熟。

## V.92
V.90之后标准是V.92。这些调制解调器能自己调整速度，如果噪声允许，上传数据速率可以是 $48\textrm{kbps}$ ，下载速率仍然是 $56\textrm{kbps}$ 。这种制解调器具有一些附加特性，例如，如果线路有呼叫等待服务，在有电话拨入时，调制解调器可以中断因特网连接。

---
# 9.3 数字用户线路
在传统调制解调器到达其最高数据速率以后，电话公司开发出了另一种技术一一数字用户线路 `digital subscriber line, DSL` 技术来提供对因特网的高速访问。

==DSL技术是在现有本地回路上，支持高速数字通信的、最有前途的技术之一==，DSL技术是一组技术，每一种只是首字母不同 `ADSL, VDSL, HDSL, SDSL` 。这组技术通常称为 `xDSL` ，这里的 `x` 可用 `A, V, H, S` 来代替。
## 9.3.1 ADSL
`xDSL` 技术中的第一种技术是**非对称数字用户线路** `asymmetrical DSL, ADSL` 。与56K调制器相似之处是，==ADSL的下行（从因特网到住户）速率（比特率）比上行（从住户到因特网）速率要高，这就是称为"非对称"的原因==。与56K调制解调器的非对称性的不同之处是，**ADSL是专门针对住宅客户设计的**，将本地回路的可用带宽进行了不均衡的划分，==这种业务不适合于那些在两个传输方向都需要较高带宽的商业客户==。

### 1. 使用现有本地回路  
一个值得注意的方面是，**ADSL使用现有的本地回路**。但是，ADSL是如何达到传统的调制解调器永远不能实现的数据速率呢？答案是，双绞线本地回路能够处理的带宽实际上高达 $1.1 \textrm{MHz}$ ，但是电话公司安装在本地交换局的滤波器，将带宽限制到 $4\textrm{kHz}$（对语音通信已经足够）。**这样做允许对大量语音通道进行多路复用**。然而，如果将撞波器拆除，那么整个 $1.1\textrm{MHz}$ 带宽就可以全部用于数据和语音通信了。
### 2. 自适应技术
$1. 1\textrm{MHz}$ 只是本地回路的理论带宽。诸如住宅与交换局之间的距离、电缆的尺寸以及所用的传输信号等因素，都会影响带宽。ADSL技术的设计者们意识到了这一问题，便采用一种自适应技术：在设定某种数据速率之前，会运用该技术测试线路的状况和可用带宽。==ADSL的数据速率不是固定的，它根据本地回路电缆的状况和类型而有所变化，**系统使用的数据率依据本地回路的线路状况而定**==。

### 3. 离散多音频技术
ADSL的标准调制技术称为**离散多音频技术** `discrete multitone technique, DMT` ，**它将正交振幅调制 `QAM` 和频分多路复用 `FDM` 结合在一起**。系统带宽的划分没有固定的方法，每个系统都可以决定自己的带宽如何划分。一般情况下，将 $1.104\textrm{MHz}$ 的可用带宽划分为 $256$ 个通道，每个通道使用的带宽是 $4.312\textrm{kHz}$ ，如图9.10所示。
![图9.10 离散多音频技术](https://img-blog.csdnimg.cn/8e33b8bf0f48455d9a7d9614bc692a2b.png)图9.11表示了带宽是如何进行划分的：
- 语音：保留通道 $0$ 用于语音通信。
- 空闲：通道 $1\sim 5$ 不使用，作为语音和数据通信之间的间隙。
- 通道 $6\sim 30$（$25$ 个通道）用于**上行数据传输和控制**。$1$ 个通道用于控制，$24$ 个通道用于数据传输。如果有 $24$ 个通道，每个使用 $4\textrm{kHz}$ （在可用带宽 $4.132\textrm{kHz}$ 之内） 带宽用QAM调制，那么在上行方向可有 $24 \times 4000 \times 15 = 1.44\textrm{Mbps}$ 的传输速率。然而，由于某些载波在噪声大处被删除，通常数据速率在 $500\textrm{kbps}$ 以下。换言之，有些通道可能不可用。
- 通道 $31\sim 255$（$225$ 个通道）用于**下行数据传输和控制**。$1$ 个通道用于控制，而其他 $224$ 个通道用于数据传输。如果有 $224$ 个通道，可获得 $224 \times 4 000 \times 15 = 13.4\textrm{Mbps}$ 的传输速率。然而，由于某些载波在噪声大处被删除，通常数据速率在 $8\textrm{Mbps}$ 以下。换言之，有些通道可能不可用。
![在这里插入图片描述](https://img-blog.csdnimg.cn/a9c4a10ce9c34db88af0abead390fa3c.png)
### 4. 客户端：ADSL调制解调器
图9.12表示了安装在客户端的ADSL调制解调器，本地回路连接到分离语音和数据通信的滤波器上。**ADSL调制解调器使用DMT调制数据，并创建上行和下行通道**。

![图9.12 ADSL调制解调器](https://img-blog.csdnimg.cn/d57249500fe14cc1b08576f37a876902.png)
注意：一般分配器由电信公司技术员安装在客户端，语音线可用在房间中已有的电话线，但**数据线需要由专业人员来安装**。这些使 ADSL的代价高昂，我们将看到有另一种通用 ADSL 或ADSL-Lite可供选择。
### 5. 电话公司端：DSLAM
在电话公司一端，情况有所不同。这一端安装了一种称为**数字用户线路接入复用器** `digital subscriber line access multiplexer, DSLAM` 的设备，以取代ASDL调制解调器，这种设备与ADSL调制解调器的功能相似。另外，它还负责将发送到因特网（lSP服务器）的数据进行分组。图9.13说明了这种配置 。
![图9 . 13 DSLAM](https://img-blog.csdnimg.cn/6ff351cf4a484cc096ea1dec9a2944af.png)
## 9.3.2 ADSL Lite
在建筑物的边界处安装分配器和新的数据线的价格昂贵，多数用户难以接受 。 一种新型号的ADSL称为 `ADSL-Lite`（通用的ADSL或无分配器ADSL）的技术，适用这些用户。这种技术允许**ADSL-Lite调制解调器**，直接插入电话机插座而连接计算机。分配工作由电话公司完成。ADSL-Lite使用 $8$ 位（代替 $15$ 位）调制256DMT的载波。由于语音信号产生的错误可能与他们混合，所以有些载波可能不适用。它提供最大下行数据速率为 $1.5\textrm{Mbps}$ 、上行数据速率为 $512\textrm{kbps}$ 。

## 9.3.3 HDSL
**高速数字用户线路** `high-bit-rate digital subscriber line, HDSL` 是为了替代T-1线路（$1.544\textrm{Mbps}$） 而设计的。T-1线路使用 `AMI` 编码，因为 `AMI` 在高频频段对衰减非常敏感，所以**将T-1线路的长度限制为 $1km$** 。==如果要传输更长的距离，就必须有中继器，这也意味着费用的增加==。

HDSL使用 `2BIQ` 编码（见[【计算机网络】第二部分 物理层和介质(4) 数字传输](https://memcpy0.blog.csdn.net/article/details/122147006)），对衰减的敏感程度要低得多。在不使用中继器的情况下，传输距离可达 $3.6km$ ，数据速率几乎可以达到 $2\textrm{Mbps}$ 。**HDSL使用双绞线实现全双工传输**。
## 9.3.4 SDSL 
**对称数字用户线路** `symmetric digital subscriber line, SDSL` 是HDSL一种双绞线型，**它提供全双工对称通信**，在每个方向支持速率达 $768\textrm{kbps}$ 。提供对称通信的SDSL可取代ADSL。ADSL提供非对称通信，下行比特率远高于上行比特率。尽管这种特性满足大多数住宅用户的需要，但是它不适用于双向都需要大容量收发数据的商业应用。
## 9.3.5 VDSL 
**甚高速数字用户线路** `very-high-bit-rate digital subscriber line, VDSL` 是与 ADSL类似的一种替代实现技术，适于短距离 $300\sim1800m$ 的通信，使用同轴电缆、光纤或者双绞线，采用DMT调制。它对上行通信在距离 $3 000$ 英尺到 $10000$ 英尺，提供比特率的范围是 $25\textrm{Mbps}$ 到 $55\textrm{Mbps}$ ，下行比特率通常是 $3.2\textrm{Mbps}$ 。
## 9.3.6 总结
表9.1显示了 DSL技术的总结。注意：数据速率和距离是近似的，从一种实现方法到另一种实现方法是可变的。 
![表 9.1  DS Li总结](https://img-blog.csdnimg.cn/3c533e33782e428e8bb73c8fd907d797.png)

---
# 9.4 传统有线网络
**有线电视网** `cable TV network` 开始是作为视频提供者，但现在它已转而**为因特网接入商务服务**。在这一节里讨论有线电视网本身的内容，在9.5节中讨论有线电视网如何用来提供高速接入因特网。
## 9.4.1 传统有线网络
20世纪40年代后期，有线电视 `cable TV` 开始将视频信号，分散传输到没有接收能力或者接收能力很弱的地区。原来称为公共天线电视 `community antenna TV, CATV` ，是因为位于高山顶或者建筑物顶端的**采集天线** `picking antenna` 从电视台 ` TV stations` 接收信号，通过同轴电缆将这些信号分配给社区公用。图9.14说明了传统的有线电视网络。
![图9.14 传统的有线电视网络](https://img-blog.csdnimg.cn/6f33d0bdeb51406dae4143a77feb4d00.png)
有线电视局，称为**前端** `head end` ，从广播台 `broadcasting
stations` 接收视频信号，并将信号馈送给同轴电缆。由于信号会变得越来越弱，所以在网络的通路上安装**放大器** `amplifier` 对信号进行放大。在前端与用户住宅之间会有多达 $35$ 个放大器。另一端，**分配器** `splitter` 分离电缆信号，通过**分接头** `tap` 和**分接/引入电缆** `drop cable` ，与用户住宅建立连接。

传统的有线电视系统使用同轴电缆进行端与端的连接。由于信号的衰减和需要使用大量的放大器，==传统网络中的通信是单向的（一个方向），视频信号是下行传输的==，即由前端到用户住宅。传统有线电视网中的通信是单向的。
## 9.4.2 光纤同轴电缆混合（HFC）网络
<u>第二代有线网络</u>称为**光纤同轴电缆混合** `hybrid fi ber-coaxial, HFC` 网络。这一网络混合使用光纤和同轴电缆。从有线电视局到称为**光纤节点** `fiber node` 的分线盒之间的传输介质是**光纤**，而从光纤节点穿过相邻住户、并到达房屋内部的线路仍然使用**同轴电缆**。图9.15说明了HFC网络的示意图。
![在这里插入图片描述](https://img-blog.csdnimg.cn/92cc23e3198842bd80bbdf332d4eaa69.png)
**地区有线前端** `regional cable head, RCH` 通常可以为多达 $400000$ 个用户服务。RCH将信号馈送到**分配集结器** `distribution hub` ，每一台集线器可以为 $40000$ 个用户服务。==分配集线器在这一新的基础设施中发挥着重要作用，信号的调制和分配都在这里完成，经过处理的信号再通过光纤馈送到光纤节点==。光纤节点将模拟信号进行分配，将相同的信号发送到每一条同轴电缆，每一条同轴电缆为 $1 000$ 个用户服务。光纤的使用可以将所需放大器的数量减少到 $8$ 个或者更少。

从传统基础设施转换到混合基础设施的一种原因是，**使有线网络成为双向的**（两个方向），HFC有线电视网络中的通信可以是双向的。

---
# 9.5 有线电视网络用作数据传输
目前，有线网络公司与电信公司正在竞争那些需要高速数据传输的住宅用户。**DSL技术为住宅用户通过本地回路提供高速连接**，但DSL使用已有的非屏蔽双绞线，对干扰非常敏感。这对数据速率的上限有了限制。**另一种解决方案是使用有线电视网络**。本节简要讨论这种技术。
## 9.5.1 带宽
即使是==在HFC系统中，在网络的最后一部分，即从光纤节点到用户住宅之间仍然是同轴电缆==。同轴电缆的带宽位于 $5\sim 750\textrm{MHz}$ 的范围（近似数）。**电缆公司将这一带宽划分为三个波段：视频、下行数据和上行数据**，如图9.16所示。
- **下行视频波段** `downstream video band` ：占用的频率范围是 $54\sim 550\textrm{MHz}$ 。由于每个电视频道占用 $6\textrm{MHz}$ ，这可以满足 $80$ 多个频道的需要。
- **下行数据波段** `downstream data band` ：下行数据（从因特网到用户住宅）占用上端波段，频率范围是 $550\sim 750\textrm{MHz}$ 。这一波段也是按 $6\textrm{MHz}$ 划分为多个通道。
	- **调制**：下行数据波段使用64-QAM（也可能是256-QAM）调制技术进行调制。
	- **数据速率**：在64-QAM调制技术中，每一个波特使用 $6$ 位。每个波特中，$1$ 个位用于前向纠错， $5$ 个位用于数据。该标准规定每个波特为 $1\textrm{Hz}$ 。这意味着从理论上讲，下行数据能以 $5\textrm{bit/Hz} \times 6\textrm{MHz} = 30\textrm{Mbps}$ 的速率接收。该标准仅指定 $27\textrm{Mbps}$ 。==然而，由于有线调制解调器是通过 `10 Base-T`==（[第三部分 数据链路层(13) 有线局域网：以太网]()）==电缆连接到计算机上的，因此将数据速率限制为 $10\textrm{Mbps}$== 。
- **上行数据波段** `upstream data band` ：上行数据（从用户住宅到因特网）占用低端波段，频率范围是 $5\sim 42\textrm{MHz}$ 。这一波段也是按 $6\textrm{MHz}$ 划分为多个通道。
	- **调制**：**上行数据波段**使用较低的频率，对噪声和干扰更为敏感。由于这种原因，QAM不适用于这个波段。更好的解决方案是使用QPSK，**上行数据使用 QPSK调制技术进行调制**。
	- **数据速率**：在QPSK调制技术中，每波特使用 $2$ 个位。该标准规定每波特是 $1\textrm{Hz}$ ，这意味着从理论上讲，下行数据能以 $2\textrm{bit/Hz} \times 6\textrm{MHz} = 12\textrm{Mbps}$ 的速率发送。然而，数据速率通常小于 $\textrm{12Mbps}$ 。
![在这里插入图片描述](https://img-blog.csdnimg.cn/4715eda5ccc64cc390285c82ba8be36d.png)
## 9.5.2 共享
**上行和下行波段可以由用户共享**。
- **上行波段共享**：上行数据带宽只有 $37\textrm{MHz}$ ，这表示在上行方向只有 $6$ 条 $6\textrm{MHz}$ 的通道可用。用户需要使用一条通道在上行方向发送数据。问题是，$6$ 条通道如何在含有 $1000,\ 2000$ 甚至 $100000$ 个用户的区域内共享？**解决方案是分时共享**。==这一波段使用FDM划分为多条通道，这些通道必须在具有相邻关系的用户间共享==。有线提供商以静态或者动态方式，将一条通道分配给一组用户。如果某个用户要发送数据，他需要与要访问这一通道的其他用户竞争，即用户必须等待直到通道可用。
- **下行波段共享**：下行方向的情况与上行方向类似。下行波段有 $33$ 个 $6\textrm{MHz}$ 的通道。有线提供商的用户数可能多于 $33$ 个，所以**每条通道必须在一组用户之间共享**。然而对下行方向来说，情况就有所不同，**这里存在多播的情况**。只要存在用户组中任何一个用户的数据，这些数据就会发送到该通道，数据会发送到该用户组中的每一个用户。但由于每个用户都具有提供商提供的注册地址，==用户组的有线调制器就会将传输数据中包含的地址，与提供商提供的地址进行匹配。如果地址匹配，数据就保留下来，否则就被丢弃==。
## 9.5.3 CM与CMTS
为了使用有线网络进行数据传输，需要两种关键设备：**有线调制解调器** `cable modem, CM` 和**有线调制解调器传输系统** `cable modem transmission system, CMTS`

有线调制解调器安装在用户的住宅内，与ADSL调制解调器类似。图9.17说明了它的位置。==有线调制解调器传输系统由有线公司安装在分配集线器中，它从因特网接收数据，并传递给混合器，由混合器发送给用户；CMTS也接收来自用户的数据，并将它们传递到因特网==。图9.18说明了CMTS的位置。
![图9.17 有线调制解调器（CM）](https://img-blog.csdnimg.cn/2cfa5d1ff9f64c21bae5d3b93efea0bf.png)![图9.18  有线调制解调器传输系统（CMTS）](https://img-blog.csdnimg.cn/79723867c8844ba5b691b6595f3b396e.png)

## 9.5.4 数据传输方案： DOCSIS
在最近几十年，已经设计了多种方案用于创建「通过HFC网络进行数据传输的标准」。最流行的一种方案是由多媒体有线网络系统 `MCNS` 设计的，称为**有线数据系统接口规范** `Data Over Cable System Interface Specification, DOCSIS）` 。DOCSIS定义了将数据从CMTS传输到CM所必需的全部协议。
### 1. 上行通信
DOCSIS定义了一种用于上行通信的协议。下面是这种协议高度简化的版本。它描述了CM必须遵循的步骤：
1. CM检查下行信道是否存在由CMTS周期性发送的特定分组，该分组要求任何新的CM在特定的上行信道上宣布自己。
2. CMTS向CM发送一个分组，规定分配给它的下行通道和上行通道。
3. CM随后启动一个过程，称为**测距** `ranging` ，以确定CM与 CMTS之间的距离。这一过程是必需的，用于所有CM与CMTS之间的同步，以获取**上行通道分时共享**时所使用的微时隙 `minislots` 。在[第三部分 数据链路层(12) 多路访问]()讨论竞争协议时，会了解到关于分时共享的知识。
4. CM向ISP发送一个分组，请求因特网地址。
5. CM与CMTS随后交换一些分组以建立安全参数 `security parameters` 。公用网络（比如有线电视网络）需要使用这些参数。
6. CM向CMTS发送它的唯一标识符。
7. 上行通信在所分配的上行通道中开始，CM会竞争微时隙来发送数据。

### 2. 下行通信
在下行方向，通信非常简单。因为只有一个发送方，所以没有竞争。CMTS使用所分配的下行通道，发送包含接收CM地址的分组。
