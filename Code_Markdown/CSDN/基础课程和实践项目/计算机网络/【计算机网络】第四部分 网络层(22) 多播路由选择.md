@[toc]



# 22.4 多播路由选择协议
在这一节讨论多播与多播路由选择协议。首先定义术语**多播**，并**将它与单播和广播相比较，简要介绍多播的应用**。最后转向**讨论多播路由选择、它的一般思想和相关目的**，还会讨论**当今因特网常用的多播路由选择协议**。
## 22.4.1 单播、多播与广播
一个报文可以**单播** `unicast` 、**多播** `multicast` 或**广播** `broadcast` 。当这些术语涉及因特网肘，让我们清晰地说明这些术语。
### 1. 单播
==在单播通信中，只有一个源端和一个目的端。源端和目的端的关系是一对一的==。在这种类型的通信中，**IP数据报中的源地址和目的地址都是分配给主机**（或者主机端口）**的单播地址**。

如图22.33所示，一个单播分组从源端 $S1$ 开始，经过路由器到达目的端 $D1$ 。为了简化该图，**可将网络视为路由器之间的一条链路**。
![图22.33 单播](https://img-blog.csdnimg.cn/47b6bc7288a843b98bf71b1ace56fc78.png)
> 注意：在单播中，当路由器接收到一个分组时，它仅从「路由选择表所定义的端口中的一个（属于最优路径上的一个）」将分组转发出去。如果路由器不能在路由选择表中找到目的地址，它就可能将分组丢弃 。
 
### 2. 多播
==在多播通信中，存在一个源端和一组目的端，其关系是一对多的==。在这类通信中，源地址是一个单播地址，而目的地址是一个组地址 `group address` ，组地址定义了一个或多个目的地址，**该组地址标识了该组的成员**。图22.34表示了多播的思想。
![图22.34 多播](https://img-blog.csdnimg.cn/8c6c38b199e64ee4a212b8f8897422b8.png)
一个多播分组从漉端 Sl 发出传向属
于组Gl 的所有目的端。在多播传输中，
当路由器接收到一个分组时，它可能通
过色的多个端口将其转发出去。
在多播中，路由器可能通过它的
多个端口将其所接收的分纽转发出去。
广播
在广播通信中，源端与目的端的关
系是一对所有的。源端只有一个，而目
的端是其余所有的主机。因特网没有明


 
确地支持广播
(broadcasting) ，因为它会产生大量的通信量，井需要高带宽。设想一下，如
果一个人想给与因特网相连的其他每个人都发送一条报文，那么在因特网上会产生多大的通
信量。
多播与多个单播
本节结束之前，我们必须区别多播与多个单播，这两个概念用图22.35说明。
GI
a) 多播
b) 多个单播
图22.35
多播与多个单播
450
第四部分网络层
多播是从源地址以→个单个分组发出，
它被路由器复制。每个分组中的目的地址对所有
的副本是相同的。注意:在任何两个路由器之间只有分组的一个副本。
在多个单播
(multiple unicasting) 中，从源端发出多个分组。例如，如果有5个目的地址，
源端发送5个分组，每个分组具有不同的单播目的地址。注意:在两个路由器之间可能有多个
副本在传送。当一个人发送一封电子邮件给一组人，这就是多个单播。电子邮件软件创建报
文的多个复制件，其中每一个具有不同的目的地址井逐一发送它们。这不是多播，而是多个
单播。
用单播仿真多播
人们可能会问当多播可用单播仿真时，为什么对多播还要用一个单独的机制。对于这个
问题有两点明显的理由:
1.多播比多个单播效率更高。在图22.35 中，我们看到多播比多个单播要求带宽小，在多
个单播中，某些链路必须处理多个副本 z
2. 在多个单播中，由源端生成的一些分组，这些分组之间有相对的延迟。如果有 1
000个
目的地址，第一个分组与最后一个分组之间的延迟可能是不可接受的。如果在多播中，因为
由源端仅生成一个分组，因此没有延迟。
用单播仿真多播效率不高并可能产生长的延迟，特别是对于大的纽。
22 .4 .2
应用
当今多播有许多应用，如访问分布式数据库
(distributed database) 、信息发布、电话会议
和远程学习。
访问分布式数据库
当前大多数数据库都是分布式的，即信息通常在生成时存储在多个地方。需要访问数据库
的用户不知道信息的地址。用户的请求是向所有数据库的地方多播，而有该信息的地方晌应。
信息发布
商业机构时常需要向它们的客户发送信息。如果信息的性质对每个客户都相同，贝Ij它可
以多播。采用这种方式，一个商业机构可发送一个报文到多个客户。例如，可向购买某个特
殊软件包的所有客户发送一个更新软件。
新闻传播
同样的，新闻可通过多播简单地传播。单独一个报文可发送给特殊感兴趣的那些人员。
例如，中学篮球冠军巡回赛的统计结果可被送给多份报纸的运动编辑记者。
电话会议
电话会议
(Teleconferencing) 包含多播，所有出席会议的人都在同一时间接收到相同的
信息。为此，可构成临时组或永久组。例如，每个星期一举行例行会议的工程组可编为永久
组，而计划休假人员的组可编为临时组。
远程学习
多播使用中一个正在成长的领域是远程学习
(distance learning) 。某一教授讲的课可被一
个特定组的学生接收到。这特别适用于那些不能到大学课堂听课的学生。
22 .4.3
多播路由选择
在这一节，我们首先讨论所有多播协议的共同部分一一最佳路由选择。然后，我们给出
第22 章传递、转发和路由选择
451
多播路由选择协议的概况。
优化路由选择:最短路径树
最佳域内路由选择过程最后形成的结果是寻找最短路径树。树的根是源端，而叶子都是
可能的目的端。从根到每个目的端的路径是最短路径。但是，在单播中树的数目和树的构成
与多播路由选择是不同的。让我们分别加以讨论。
单播路由选择
在单播路由选择中，当路由器接收到一个要转发的分组时，它需要寻找
到分组的目的端的最短路径。路由器在路由表中查询那个特定的目的地址，对应于该目的地
址的下一跳是最短路径的起始点，路由器知道到达每个目的端的最短路径，这说明路由器有
一个最佳地到达所高目的地址的最短路径树。换言之，路由表的每一行是一条最短路径$而
整个路由选择表是一个最短路径树。在单播路由选择中，每个路由器需要有唯一的最短路径
树转发分组，然而每个路由器有它自己的最短路径树。图22.36显示了这样的情形。
图22.36显示了路由器 Rl 路由表和最短路径树。路由表中的每一行对应于从根到相应网络
的一条路径。整个路由表代表了最短路径树。
N2
Nl
、:~
萃山阳咄咄跑回耐峭
「||||||」
在单播路由选择中，区域中的每一个路由器都有一张哀，该在定义了到可能目的地址
的一棵最短路径树。
多播路由选择
当路由器接收到一个多播分组时，情形与接收到一个单播分组时有所不
同。一个多播分组可能有多个网络中的目的地址。向组中的成员转发单个分组要求一个最短
路径树。如果有n个组，那么我们需要n个最短路径树。可以想像多播路由选择的复杂性。为
了解决这个问题，已使用两种方告:基于源树和组共享树。
·基于源树。在基于源树
(source-based
tree) 方法中，每个路由器要求每组都要有一个
最短路径树。一个组的最短路径树定义了包含那个组的忠实成员的每个网络的下一跳。
在图22.37 中，我们假定在区域中只有5个组:
Gl 、
G2 、
G3 、
G4和G5 。此时，
Gl 在4个
网络上有忠实成员，
G2在 3个网络上有忠实成员，
G3 在2个网络上有忠实成员，
G4在2
个网络上有忠实成员以及 G5在2个网络上有忠实成员。我们已在每个网络上表示了忠实
成员所在组的名。图22.37也表示了路由器 Rl 的多播路由表。每个组有一个最短路径树，
所以 5个组有 5个最短路径树。如果路由器 Rl 接收到目的地址为 Gl 的一个分组，那么它
需要将分组的一个副本发送给与它有连接的网络，向路由器 R2发送一个副本，向路由器
R4发送一个副本，这样Gl 的所有成员都能接收到一个副本。在这种方告中，如果组的
个数是 m ， 那么每个路由器需要有m个最短路径树，每组一个。我们可以想像，如果有
452
第四部分网络层
成百或成千的组，路由表将是多么复杂。然而，我们将说明不同的协议将如何处理以减
小其复杂性。
在基于源树方法中，对每个组每个路由器都需要有一个最短路径树。
GI.G2
GI.G2
G3
GI. G4, G5
G1.G2.G4
图22.37
基于源树方法
·组共享树。在组共享树
(group-shared
tree) 方法中。不是每一个路由器都具有m个最短
路径树，而只是一个指定的路由器称为中央核心或会合路由器
(rendezvous
router) 担
任分配多播通信量的责任。中央核心路由器在它的路由表中有m条最短路径。区域中其
余的路由器都没有。如果一个路由器接收到一个多播分组，它将该分组封装在单播分组
中，井发送给核心路由器，核心路由器从它的封装体中重新恢复这个多播分组，并查询
它的路由表路由该分组。图22.38表示这个思路。
Gl, G2
最短路径树
Gl, G2, G4
最短路径树
图22.38
组共享树
在纽共享树方法中，只有一个核心路由器，它对多播所涉及的每一个纽有一个最短路
径树。
22 .4 .4
多播路由选择协议
在最近十几年间，已经出现一些多播路由选择协议。
其中有些是单播路由选择协议的扩
展，另一些全是新开发的。
在本章的余下部分就讨论这些多播路由选择协议。图22.39显示了这些协议的分类。
第22 章传递、转发和路由选择
453
MOSPF
DVMRP
CBT
图22.39
常用的多播路由选择协议的分类
多播链路状态路由选择: MOSPF
这一节简要讨论多播链路状态路由选择及其在因特网中的实现，
MOSPF 。
多播链路状态路由选择
我们在 22.3节中讨论了单播链路状态路由选择，我们说每个路由
器用 Dijkstra算法创建一个最短路径树，路由表是最短路径树的一种转换形式。多播链路状态
路由选择是单播路由选择的直接扩充，它使用一个基于源树方怯。尽管它完全包含单播路由
选择，但多播路由选择的扩充部分是很简单的和直接的。
|
多播链路状态路由选择使用基于源树方法。
记住在单播路由选择中，每个节点需要通告它的链路状态。对于多播路由选择来说，每
个节点要修正状态的解释，一个节点通知链路上有忠实成员的每个组。此时，状态的意思是
"在链路上哪些组是活动的"。有关组的信息来自 IGMP
(见第 21 章)。每个运行IGMP的路由器
请求链路上主机寻找成员状态。
当路由器接收到所有LSP时，它用 Dijkstra算法创建n个最短路径树，从中创建n个拓扑结
构
(n是组的个数)。于是，每个路由器有一个路由表，该表代表与组一样多的最短路径树。
这种协议要解决的唯一问题是创建和保存多个最短路径树所需的时间和空间。解决办告是仅
当需要时才创建树。当路由器接收到具有多播目的地址的分组时，它运行 Dijsktra算法计算那
个组的最短路径树。其结果被高速缓存，以防万一到那个目的地址还有其他的分组出现。
MOSPF
多播开放最短路径优先
(Multicast Open Shortest Path First , MOSPF) 协议是
对OSPF协议的一个扩充，它运用多播链路状态路由选择创建基于源树策略的树。该协议增加
了一个新的链路状态更新分组，将一个主机的单播地址与组地址或该主机提供的地址关联起
来。这个分组被称为组成员关系 LSA 。用这种方法，能够在树中只包括属于一个特定组的主
机(用它们的单播地址)。换句话说，可以生成一个包含属于一个组所有主机的树，但在计算
时使用主机的单播地址。为了提高效率，路由器按需求计算最短路径树(当它接收到第一个
多播分组时)。此外，能将该树存储在高速缓存中，以备将来相同的源/组对使用。
MOSPF是
一种数据驱动
(data-dri ven) 协议。当 MOSPF路由器第一次发现一个具有给定源和组地址的
数据报时，该路由器就计算Dijkstra最短路径树。
多播距离向量: DVMRP
在这节中，我们简要讨论多播距离向量路由选择及其在因特网中的实现，
DVMRP 。
多播距离向量路由选择
单播距离向量路由选择是很简单的，扩充它支持多播路由选择
是复杂的。多播路由选择不允许一个路由器向它的邻站发送它的路由表。它使用单播距离向
量路由表的信息从头创建一张路由表。
多播距离向量路由选择使用基于摞树，但路由器从不真正创建路由表。当路由器接收到
多播分组时，它转发该分组好像它正在查询一张路由表一样。我们可以说最短路径树是短暂
的，它使用后(转发分组后) ，该表就消失了。
454
第四部分网络层
为了达到这个目的，多播距离向量算怯是基于4个决策的一个过程。每个策略建立在前一
个策略之上，并改进前一个存在的缺点。我们依次说明并观察每个策略是如何改进的。
·洪泛。洪泛是第一个策略。一个路由器接收到一个分组，除该接收接口外它甚至不查找
目的组地址就向它的所有接口发送该分组。洪泛实现多播目的:具有活动成员的每个网
络都接收到该分组，而没有活动成员的网络也接收到该分组。这是广播而不是多播。这
就出现另一个问题:它会形成回路。一个分组离开路由器，它可能从另一个接口或同一
接口重新返回，再次被转发。有些供泛协议为了避免回路暂时保存分组副本一段时间，
然后就丢弃。下一个策略是逆路径转发，纠正这个缺点。
洪泛策略广播分组，但在系统中形成回路。
·逆路径转发
(RPF) 。逆路径转发是洪泛策略的一个修改版。为了防止回路的形成，只
转发一个副本而将其他副本都丢弃。在RPF中，路由器只转发那个已经通过从源端到路
由器的最短路径进行传输的副本。为了找到这个副本，
RPF使用了单播路由选择表。路
由器接收到一个分组，并从该分组中提取出源地址(一个单播地址)。路由器查询它的
单播路由表，就好像它要发送一个分组到这个源地址，路由表会告诉路由器下一跳地址。
如果到达的多播分组正好来自于路由表中所定义的下一跳地址，那么该分组是沿着从源
端到路由器的最短路径传输的，这是因为在单播距离向量路由选择协议中，最短路径的
反方向的。如果A到 B 的路径是最短的路径，那么 B到 A的路径也是最短的。如果分组是
沿着最短路径传输，则路由器转发它，
源端
否则丢弃它。
这种策略防止回路形成，因为从源到路由
器总是沿着最短路径传输。如果一个分组离开
后又返回，显然这不是最短路径。图22 .4 0清
楚地说明了这一点。
图22 .40表示了部分区域和源端。计算路由
器 Rl 、
R2和 R3 的最短路径，用粗线表示。当
Rl 通过接口 ml 接收到来自源端的一个分组肘，
它查询它的路由表井找到从Rl 到源端的最短路
径是通过接口 ml ，转发该分组。但是，如果通
过接口 m2到达的分组一个副本，贝 IJ 丢弃。因为
m2不是Rl 到源端的最短路径。对 R2和 R3也一
咱
1 m3
图22.40
逆路径转发
(RPF)
R5
R6
样。读者可能会问，如果一个分组副本到达 R3 的 ml 接口，经过 R6 、
R5 、
R2传输，然后通过
接口 ml进入R3将会发生什么?这个接口的确是R3的接口，该分组的副本是否被转发?回答是
在这种情形下什么也不会发生，因为当分组从R5到 R2传输时，它将被R2丢弃，永远不会到达
R3. 源端的上行路由器总是丢弃那些不是通过最短路径传输的分组，因此避免了下行路由器
的混淆。
|一丁PF消除了洪泛过程的响。
·逆路径广播
(RPB).
RPF能确保每个网络接收一个多播分组的副本而不构成回路。然
而，它不能保证每个网络只接收一个副本(一个网络可能接收两个或多个副本)。其原
因是，
RPF并不是基于目的地址(组地址)的，而转发是基于源地址的。为了直观地了
解这个问题，让我们考察图22 .4 1 。
第 22 章传递、转发和路由选择
455
Z节fspg2
图22 .4 1
RPF的问题
在图22 .4 1 中，即使每个路由器从每个接口只发送出分组的一个副本，网络 3还是接收到
分组的二个副本。有重复的原因是没有生成树，而是用图。网络 3有二个父路由器:
R2和R4 。
为了消除重复情况的发生，对每个网络必须只定义一个父路由器，而且必须施加一种限制，
即:一个网络只能通过一个指定的父路由器
(designated parent router) ，接收一个来自特定掠
端的多播分组。
现在，这种策略就很清楚了。对每个源端，路由器只将分组从指定的父路由器的端口发
送出去。这种策略称为逆路径广播
(RPB)o
RPB 不仅能确保分组到达每个网络，而且能保证
每个网络只接收一个副本。图22 .42说明了 RPF与 RPB之间的差异。
b)RPB
图22 .42
RFP与 RFB的比较
读者可能会问父路由器是如何确定的。用到源端具有最短路径的路由器作为指定的父路
由器。因为路由器周期地向每个其他的路由器发送更新分组(在RIP) ，它们很容易确定在邻
近路由器中哪一个路由器到源端有最短路径(在源端作为目的端解释时)。如果存在多个路由
器相等时，选取具有最小IP地址的路由器。
RPB 创建从源端到每一个目的~的一个最短路径广播树，它保证每个目的端接收到分
组的一个且仅有一个副本。
·逆路径多播
(RPM) 。也许读者已经注意到了，
RPB并不能对分组进行多播，而只能对
它进行广播。这样做是没有效率的。为了使其更有效率，对特定的组，多播分组只能到
达那些具有活动成员的网络。该策略称为逆路径多播
(reverse path multicasti吨，
RPM) 。
为了把广播转变成多播，协议使用两种方桂:修剪和嫁接。图22 .4 3说明了修剪和嫁接
的思想。
每个网络的指定的父路由器负责保存成员关系信息，这通过第21 章所讨论的 IGMP协议来
完成。当连接网络的路由器发现没有参加多播分组时，修剪过程就开始了。路由器开始发送
一个修剪报文
(prune message) 到上行路由器，这样它可拒绝相应的接口。即上行路由器可
停止通过那个接口发送这个组的多播报文。现在，如果这个路由器接收到来自所有下行路由
456
第四部分网络层
器的修剪报文，它依次地发送一个修剪报文到上行路由器。
a) RPF
c)RPM (修剪后)
|肌
策"1 町、\
组至þ
C@j盔Ì)也盔l>
b)RPB
d) RPM (嫁接后)
图22.43
RPF 、
RPB幸日 RPM
如果一个叶子路由器(在树底端的路由器)已发送一个修剪报文，但通过 IGMP突然了解
到其中一个网络重新参于接收该多播分组。将怎样做? 'È可发送嫁接报文
(graft message) ,
该报文强制上行路由器恢复发送多播报文。
RPM将修剪和嫁接添加到 RPB 中，以创建一个多播最短路径树，该树支持动态成员关
系的改变。
DVMR距离向量多播路由选择协议
(Dìstance Vector Multìcast Routìng Protocol) 是多播
距离向量路由选择的实现。它是基于RIP的基于源树的路由选择协议。
CBT
基于核的树
(còre-Based Tree , CBT) 协议是一种组共享协议，它使用核心路由器作为树
的根。自治系统
(AS) 被分成多个区域，而每个区域选择一个核心路由器(中心路由器或会
合路由器)。
树的生成
在选择了一个会合路由器之后，就要将所选择路由器的单播地址通知给每个
路由器，然后每个路由器就发送一条单播加入
报文来表明它想加入该组。这条报文通过位于
发送方和会合路由器之间的所有路由器。每个
中间路由器就从这条报文中取出所需的信息，
如发送方的单播地址和分组到达所经过的端口
等。然后它就将该报文转发到路径中的下一个
路由器。当会合路由器已经收到了来自组中每
个成员的所有加入报文时，树就生成完毕。此
时，每个路由器都知道了它的上行路由器(通
向根的路由器)和下行路由器(通向叶子的路
由器)。
共享树
成员
成员
成员
图22.44
具有会合路由器的组共享树
如果一个路由器想离开该组，它就给它的上行路由器发送一条离开报文。上行路由器就
从树中除去与那台路由器的链路，并将该报文转发到它的上行路由器，依此类推。图22.44说
明了一个具有会合路由器的组共享树。
第22 幸传递、转发和路由选择
457
读者可能已注意到了 DVMRP 、
MOSPF及CBT之间的差异。首先，前面两种树是从根生
成的，而CBT的树是从叶子生成的。其次，在DVMRP中，首先生成树(广播) ，然后对其进
行修剪 z 而在CBT中，开始并没有生成树，树是通过逐步加入(嫁接)节点而形成的。
发送多播分组
在树生成之后，任何(属于组或不属于组的)源端都会给组中所有的成
员发送一个多播分组。它仅使用会合路由器的单播地址将该分组发送到这个路由器。然后这
个会合路由器将该分组分发到该组的所有成员。图22 .45说明了一个主机如何能将一个多播分
组发送到该组的所有成员。注意:源主机可以是共享树内(或外)的任何主机。在图22 .45 中，
说明了位于共享树外的源主机。
圈 22.45
发送一个多播分组到会合路由器
选择会合路由器
除了一点之外，这个方怯是简单的。应该如何选择会合路由器以优化
处理过程和多播呢?已经有了多种实现方毡，但这个问题已超出了本书的讨论范围，留给更
高级的书讨论。
总之，基于核的树
(CBT) 是一个组共享树，一种每组使用一棵树的基于中心的协议。
树中的一个路由器称为核心路由器。遵循如下过程将一个分组从惊端发送到组的成员:
1.可能是(也可能不是)树的一部分的源端将多播分组封装到一个具有核心路由器单播
目的地址的单播分组中，并将其发送给这个核心路由器。这一阶段的传递是使用一个单播地
址来实现的，井且唯一的接收方是核心路由器。
2. 核心路由器将单播分组分解出来，并将其转发到所有加入请求到达的端口。
3. 每个接收到多播分组的路由器接着又将其转发给所有有加入请求的端口。
在CBT 中，源端给核心路由器发送多播分纽(封装在一个单播分纽中)。核心路由器分
解该分组，并将其转发到所有有加入请求的主机。
PIM
协议独立多播
(Protocol Independent Multicast , PIM) 是两个独立多播路由选择协议的
合称，它们是 PIM 密集模式
(PIM Dense Mode , PIM-DM)
和 PIM稀疏模式
(PIM Sparse
Mode , PIM-SM) 。这两个协议都是依赖于单播协议，在这里就不讨论其相似性了，下面分别
对其进行讨论。
PIM-DM
当每个路由器存在参与多播路由选择的可能性时，就使用 PIM-DM 。在此情况
下，使用一种广播分组的协议是合理的，因为几乎所有的路由器都参与到该过程中。
458
第四部分网络层
PIM-DM 用于密集多播环境，如一个局域网中。
PIM-DM是一种以基于摞树的路由选择协议，它使用 RPF和修剪/嫁接的多播路由选择策
略。其操作与 DVMRP相似。然而，与 DVMRP不同的是，它不依赖于一种特定的单播路由选
择协议。它假定自治系统使用一种单播协议，并且每个路由器有一个表，利用该表就能找到
通向目的端的最优路径的外发端口。这种单播协议可能是一种距离矢量协议
(RIP) 或链路状
态协议
(OSPF) 。
PIM-DM 使用 RPF和修剪/嫁接策略来处理多播3ft.由选择。然而，它还是独立于底层的
单播协议 。
PIM-SM
当每个路由器存在参与多播路由选择的可能性很小时(稀疏模式) ，就使用
PIM-SM 。在此情况下，使用广播分组的协议是不合理的，但使用一种诸如CBT之类的组共享
树的协议就更加合理了。
PIM-SM 用于稀疏多播坏境，如广域网。
PIM-SM是一种组共享树路由选择协议，它使用一个会合点
(RP) 作为树的源端。其操
作与 CBT相似，但它更简单。因为它不要求对加入报文的确认。此外，它还为每个区域创建
一个RP备份集，用于RP故障恢复。
PIM-SM的一个特点是，在需要时它能从组共享树策略转换到基于源树策略。如果存在一
个远离 RP的密集活动区域，就会发生这种情况。在此情况下，就能利用基于源树策略，而不
是组共享树策略对该区域进行更高效地处理。
PIM-SM 与 CBT类似，但其实现过程史简洁。
MBONE
多媒体和实时通信使因特网上对多播路由选择的需求增大了。然而，只有一小部分因特
网路由器是多播路由器。换句话说，一个多播
逻辑隧道
路由器
(multicast
router) 可能在其附近找不
到另一个多播路由器来转发多播分组。虽然在
RI
近几年内可通过增加越来越多的多播路由器解
决此问题，但可以采用另一种方法，这种方诠
就是隧道技术
(tunneling) 。多播路由器可视
为紧接着单播路由器的一组路由器。多播路由
器在物理上可能没有连接在一起，但它们在逻
辑上是连在一起的。图22 .46说明了这种思想。
在图22 .4 6 中，只有阴影圆圈内的路由器能进
R3
逻辑隧道
图22.46
逻辑隧道
行多播路由选择。如果没有隧道技术，这些路由器是一些孤立的"岛屿"。为了使它们能进行
多播路由选择，可运用隧道技术的概念将这些孤立的路由器组成一个多播主干网
(multicast
backbone ,
MBONE) 。
通过将多播分组封装于一个单播分组中可以创建一个逻辑隧道(logical tunnel) 。此时，多
播分组就成为单播分组的有效载荷(数据)。中间(非多播)路由器作为单播路由器来路由分
组，井将其从一个"岛屿"传递到另一个。这样做好像单播路由器不存在，而两个多播路由器
是相邻的一样。目前唯一支持MBONE和隧道技术的协议是DVMRP。图22 .47说明了这种概念。  
  
图22 .47
MBONE**

