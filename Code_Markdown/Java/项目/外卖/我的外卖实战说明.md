## 1. 说明
通过前面项目的开发，已经积累了一些开发经验，通过项目实战来检验学习效果，同时激发自学能力和自主解决问题的能力。原则上，所有实战内容需要独立完成。
## 2. 需求
- [ ] **后台系统**
​	**菜品**管理（批量删除、起售停售）
​	**套餐**管理（修改、起售停售）
​	**订单**明细
- [ ] **移动端**
​	**个人中心**（退出登录、最新**订单查询**、历史订单、**地址管理**-修改地址、地址管理-删除地址）
​	**购物车**（删除购物车中的商品)

## 3. 实战要求
每位同学需要实现上面的需求，实现过程中可以参考已有代码进行改造或者上网查询资料，只要最终能够实现需求即可。由于实战内容比较多，可以在课程实施过程中根据情况提前布置实战内容。

软件开发整体介绍
- 软件开发流程
	![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303031719441.png)
- 角色分工
	![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303031721935.png)

- 软件环境
	- 开发环境：本地或服务器，开发人员在开发阶段使用的环境，一般外部用户无法访问
	- 测试环境：服务器，专门给测试人员使用的环境，用于测试项目，一般外部人员无法访问
	- 生成环境 *production* ：即线上环境，正式对外提供服务的环境

# 外卖项目介绍
## 项目介绍
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303031727825.png)

## 产品原型展示
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303031729531.png)
注意事项：产品原型主要用于展示项目的功能，并不是最终的页面效果。
## 技术选型
Nginx：集群管理，请求分发
Spring Session：共享数据
Swagger：前后端分离
Redis：缓存
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303031734120.png)

## 功能架构
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303031736112.png)

## 角色
项目上线后，使用项目系统的用户。
- 后台系统管理员：登录后台管理系统，拥有后台系统中的所有操作权限
- 后台系统普通员工：登录后台管理系统，对菜品、套餐、订单等进行管理
- C端用户：登录移动端应用，可以浏览菜品、添加购物车、设置地址、在线下单等
 
## 开发环境搭建
```sql
create database reggie character set utf8mb4;
```
创建数据表：
```sql

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for address_book
-- ----------------------------
DROP TABLE IF EXISTS `address_book`;
CREATE TABLE `address_book` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `user_id` bigint(20) NOT NULL COMMENT '用户id',
  `consignee` varchar(50) COLLATE utf8_bin NOT NULL COMMENT '收货人',
  `sex` tinyint(4) NOT NULL COMMENT '性别 0 女 1 男',
  `phone` varchar(11) COLLATE utf8_bin NOT NULL COMMENT '手机号',
  `province_code` varchar(12) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT '省级区划编号',
  `province_name` varchar(32) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT '省级名称',
  `city_code` varchar(12) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT '市级区划编号',
  `city_name` varchar(32) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT '市级名称',
  `district_code` varchar(12) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT '区级区划编号',
  `district_name` varchar(32) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT '区级名称',
  `detail` varchar(200) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT '详细地址',
  `label` varchar(100) CHARACTER SET utf8mb4 DEFAULT NULL COMMENT '标签',
  `is_default` tinyint(1) NOT NULL DEFAULT '0' COMMENT '默认 0 否 1是',
  `create_time` datetime NOT NULL COMMENT '创建时间',
  `update_time` datetime NOT NULL COMMENT '更新时间',
  `create_user` bigint(20) NOT NULL COMMENT '创建人',
  `update_user` bigint(20) NOT NULL COMMENT '修改人',
  `is_deleted` int(11) NOT NULL DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='地址管理';



-- ----------------------------
-- Records of address_book
-- ----------------------------
INSERT INTO `address_book` VALUES ('1417414526093082626', '1417012167126876162', '小明', '1', '13812345678', null, null, null, null, null, null, '昌平区金燕龙办公楼', '公司', '1', '2021-07-20 17:22:12', '2021-07-20 17:26:33', '1417012167126876162', '1417012167126876162', '0');
INSERT INTO `address_book` VALUES ('1417414926166769666', '1417012167126876162', '小李', '1', '13512345678', null, null, null, null, null, null, '测试', '家', '0', '2021-07-20 17:23:47', '2021-07-20 17:23:47', '1417012167126876162', '1417012167126876162', '0');

-- ----------------------------
-- Table structure for category
-- ----------------------------
DROP TABLE IF EXISTS `category`;
CREATE TABLE `category` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `type` int(11) DEFAULT NULL COMMENT '类型   1 菜品分类 2 套餐分类',
  `name` varchar(64) COLLATE utf8_bin NOT NULL COMMENT '分类名称',
  `sort` int(11) NOT NULL DEFAULT '0' COMMENT '顺序',
  `create_time` datetime NOT NULL COMMENT '创建时间',
  `update_time` datetime NOT NULL COMMENT '更新时间',
  `create_user` bigint(20) NOT NULL COMMENT '创建人',
  `update_user` bigint(20) NOT NULL COMMENT '修改人',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `idx_category_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='菜品及套餐分类';

-- ----------------------------
-- Records of category
-- ----------------------------
INSERT INTO `category` VALUES ('1397844263642378242', '1', '湘菜', '1', '2021-05-27 09:16:58', '2021-07-15 20:25:23', '1', '1');
INSERT INTO `category` VALUES ('1397844303408574465', '1', '川菜', '2', '2021-05-27 09:17:07', '2021-06-02 14:27:22', '1', '1');
INSERT INTO `category` VALUES ('1397844391040167938', '1', '粤菜', '3', '2021-05-27 09:17:28', '2021-07-09 14:37:13', '1', '1');
INSERT INTO `category` VALUES ('1413341197421846529', '1', '饮品', '11', '2021-07-09 11:36:15', '2021-07-09 14:39:15', '1', '1');
INSERT INTO `category` VALUES ('1413342269393674242', '2', '商务套餐', '5', '2021-07-09 11:40:30', '2021-07-09 14:43:45', '1', '1');
INSERT INTO `category` VALUES ('1413384954989060097', '1', '主食', '12', '2021-07-09 14:30:07', '2021-07-09 14:39:19', '1', '1');
INSERT INTO `category` VALUES ('1413386191767674881', '2', '儿童套餐', '6', '2021-07-09 14:35:02', '2021-07-09 14:39:05', '1', '1');

-- ----------------------------
-- Table structure for dish
-- ----------------------------
DROP TABLE IF EXISTS `dish`;
CREATE TABLE `dish` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `name` varchar(64) COLLATE utf8_bin NOT NULL COMMENT '菜品名称',
  `category_id` bigint(20) NOT NULL COMMENT '菜品分类id',
  `price` decimal(10,2) DEFAULT NULL COMMENT '菜品价格',
  `code` varchar(64) COLLATE utf8_bin NOT NULL COMMENT '商品码',
  `image` varchar(200) COLLATE utf8_bin NOT NULL COMMENT '图片',
  `description` varchar(400) COLLATE utf8_bin DEFAULT NULL COMMENT '描述信息',
  `status` int(11) NOT NULL DEFAULT '1' COMMENT '0 停售 1 起售',
  `sort` int(11) NOT NULL DEFAULT '0' COMMENT '顺序',
  `create_time` datetime NOT NULL COMMENT '创建时间',
  `update_time` datetime NOT NULL COMMENT '更新时间',
  `create_user` bigint(20) NOT NULL COMMENT '创建人',
  `update_user` bigint(20) NOT NULL COMMENT '修改人',
  `is_deleted` int(11) NOT NULL DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `idx_dish_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='菜品管理';

-- ----------------------------
-- Records of dish
-- ----------------------------
INSERT INTO `dish` VALUES ('1397849739276890114', '辣子鸡', '1397844263642378242', '7800.00', '222222222', 'f966a38e-0780-40be-bb52-5699d13cb3d9.jpg', '来自鲜嫩美味的小鸡，值得一尝', '1', '0', '2021-05-27 09:38:43', '2021-05-27 09:38:43', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397850140982161409', '毛氏红烧肉', '1397844263642378242', '6800.00', '123412341234', '0a3b3288-3446-4420-bbff-f263d0c02d8e.jpg', '毛氏红烧肉毛氏红烧肉，确定不来一份？', '1', '0', '2021-05-27 09:40:19', '2021-05-27 09:40:19', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397850392090947585', '组庵鱼翅', '1397844263642378242', '4800.00', '123412341234', '740c79ce-af29-41b8-b78d-5f49c96e38c4.jpg', '组庵鱼翅，看图足以表明好吃程度', '1', '0', '2021-05-27 09:41:19', '2021-05-27 09:41:19', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397850851245600769', '霸王别姬', '1397844263642378242', '12800.00', '123412341234', '057dd338-e487-4bbc-a74c-0384c44a9ca3.jpg', '还有什么比霸王别姬更美味的呢？', '1', '0', '2021-05-27 09:43:08', '2021-05-27 09:43:08', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397851099502260226', '全家福', '1397844263642378242', '11800.00', '23412341234', 'a53a4e6a-3b83-4044-87f9-9d49b30a8fdc.jpg', '别光吃肉啦，来份全家福吧，让你长寿又美味', '1', '0', '2021-05-27 09:44:08', '2021-05-27 09:44:08', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397851370462687234', '邵阳猪血丸子', '1397844263642378242', '13800.00', '1246812345678', '2a50628e-7758-4c51-9fbb-d37c61cdacad.jpg', '看，美味不？来嘛来嘛，这才是最爱吖', '1', '0', '2021-05-27 09:45:12', '2021-05-27 09:45:12', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397851668262465537', '口味蛇', '1397844263642378242', '16800.00', '1234567812345678', '0f4bd884-dc9c-4cf9-b59e-7d5958fec3dd.jpg', '爬行界的扛把子，东兴-口味蛇，让你欲罢不能', '1', '0', '2021-05-27 09:46:23', '2021-05-27 09:46:23', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397852391150759938', '辣子鸡丁', '1397844303408574465', '8800.00', '2346812468', 'ef2b73f2-75d1-4d3a-beea-22da0e1421bd.jpg', '辣子鸡丁，辣子鸡丁，永远的魂', '1', '0', '2021-05-27 09:49:16', '2021-05-27 09:49:16', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397853183287013378', '麻辣兔头', '1397844303408574465', '19800.00', '123456787654321', '2a2e9d66-b41d-4645-87bd-95f2cfeed218.jpg', '麻辣兔头的详细制作，麻辣鲜香，色泽红润，回味悠长', '1', '0', '2021-05-27 09:52:24', '2021-05-27 09:52:24', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397853709101740034', '蒜泥白肉', '1397844303408574465', '9800.00', '1234321234321', 'd2f61d70-ac85-4529-9b74-6d9a2255c6d7.jpg', '多么的有食欲啊', '1', '0', '2021-05-27 09:54:30', '2021-05-27 09:54:30', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397853890262118402', '鱼香肉丝', '1397844303408574465', '3800.00', '1234212321234', '8dcfda14-5712-4d28-82f7-ae905b3c2308.jpg', '鱼香肉丝简直就是我们童年回忆的一道经典菜，上学的时候点个鱼香肉丝盖饭坐在宿舍床上看着肥皂剧，绝了！现在完美复刻一下上学的时候感觉', '1', '0', '2021-05-27 09:55:13', '2021-05-27 09:55:13', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397854652581064706', '麻辣水煮鱼', '1397844303408574465', '14800.00', '2345312·345321', '1fdbfbf3-1d86-4b29-a3fc-46345852f2f8.jpg', '鱼片是买的切好的鱼片，放几个虾，增加味道', '1', '0', '2021-05-27 09:58:15', '2021-05-27 09:58:15', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397854865672679425', '鱼香炒鸡蛋', '1397844303408574465', '2000.00', '23456431·23456', '0f252364-a561-4e8d-8065-9a6797a6b1d3.jpg', '鱼香菜也是川味的特色。里面没有鱼却鱼香味', '1', '0', '2021-05-27 09:59:06', '2021-05-27 09:59:06', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397860242057375745', '脆皮烧鹅', '1397844391040167938', '12800.00', '123456786543213456', 'e476f679-5c15-436b-87fa-8c4e9644bf33.jpeg', '“广东烤鸭美而香，却胜烧鹅说古冈（今新会），燕瘦环肥各佳妙，君休偏重便宜坊”，可见烧鹅与烧鸭在粤菜之中已早负盛名。作为广州最普遍和最受欢迎的烧烤肉食，以它的“色泽金红，皮脆肉嫩，味香可口”的特色，在省城各大街小巷的烧卤店随处可见。', '1', '0', '2021-05-27 10:20:27', '2021-05-27 10:20:27', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397860578738352129', '白切鸡', '1397844391040167938', '6600.00', '12345678654', '9ec6fc2d-50d2-422e-b954-de87dcd04198.jpeg', '白切鸡是一道色香味俱全的特色传统名肴，又叫白斩鸡，是粤菜系鸡肴中的一种，始于清代的民间。白切鸡通常选用细骨农家鸡与沙姜、蒜茸等食材，慢火煮浸白切鸡皮爽肉滑，清淡鲜美。著名的泮溪酒家白切鸡，曾获商业部优质产品金鼎奖。湛江白切鸡更是驰名粤港澳。粤菜厨坛中，鸡的菜式有200余款之多，而最为人常食不厌的正是白切鸡，深受食家青睐。', '1', '0', '2021-05-27 10:21:48', '2021-05-27 10:21:48', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397860792492666881', '烤乳猪', '1397844391040167938', '38800.00', '213456432123456', '2e96a7e3-affb-438e-b7c3-e1430df425c9.jpeg', '广式烧乳猪主料是小乳猪，辅料是蒜，调料是五香粉、芝麻酱、八角粉等，本菜品主要通过将食材放入炭火中烧烤而成。烤乳猪是广州最著名的特色菜，并且是“满汉全席”中的主打菜肴之一。烤乳猪也是许多年来广东人祭祖的祭品之一，是家家都少不了的应节之物，用乳猪祭完先人后，亲戚们再聚餐食用。', '1', '0', '2021-05-27 10:22:39', '2021-05-27 10:22:39', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397860963880316929', '脆皮乳鸽', '1397844391040167938', '10800.00', '1234563212345', '3fabb83a-1c09-4fd9-892b-4ef7457daafa.jpeg', '“脆皮乳鸽”是广东菜中的一道传统名菜，属于粤菜系，具有皮脆肉嫩、色泽红亮、鲜香味美的特点，常吃可使身体强健，清肺顺气。随着菜品制作工艺的不断发展，逐渐形成了熟炸法、生炸法和烤制法三种制作方法。无论那种制作方法，都是在鸽子经过一系列的加工，挂脆皮水后再加工而成，正宗的“脆皮乳鸽皮脆肉嫩、色泽红亮、鲜香味美、香气馥郁。这三种方法的制作过程都不算复杂，但想达到理想的效果并不容易。', '1', '0', '2021-05-27 10:23:19', '2021-05-27 10:23:19', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397861683434139649', '清蒸河鲜海鲜', '1397844391040167938', '38800.00', '1234567876543213456', '1405081e-f545-42e1-86a2-f7559ae2e276.jpeg', '新鲜的海鲜，清蒸是最好的处理方式。鲜，体会为什么叫海鲜。清蒸是广州最经典的烹饪手法，过去岭南地区由于峻山大岭阻隔，交通不便，经济发展起步慢，自家打的鱼放在锅里煮了就吃，没有太多的讲究，但却发现这清淡的煮法能使鱼的鲜甜跃然舌尖。', '1', '0', '2021-05-27 10:26:11', '2021-05-27 10:26:11', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397862198033297410', '老火靓汤', '1397844391040167938', '49800.00', '123456786532455', '583df4b7-a159-4cfc-9543-4f666120b25f.jpeg', '老火靓汤又称广府汤，是广府人传承数千年的食补养生秘方，慢火煲煮的中华老火靓汤，火候足，时间长，既取药补之效，又取入口之甘甜。 广府老火汤种类繁多，可以用各种汤料和烹调方法，烹制出各种不同口味、不同功效的汤来。', '1', '0', '2021-05-27 10:28:14', '2021-05-27 10:28:14', '1', '1', '0');
INSERT INTO `dish` VALUES ('1397862477831122945', '上汤焗龙虾', '1397844391040167938', '108800.00', '1234567865432', '5b8d2da3-3744-4bb3-acdc-329056b8259d.jpeg', '上汤焗龙虾是一道色香味俱全的传统名菜，属于粤菜系。此菜以龙虾为主料，配以高汤制成的一道海鲜美食。本品肉质洁白细嫩，味道鲜美，蛋白质含量高，脂肪含量低，营养丰富。是色香味俱全的传统名菜。', '1', '0', '2021-05-27 10:29:20', '2021-05-27 10:29:20', '1', '1', '0');
INSERT INTO `dish` VALUES ('1413342036832100354', '北冰洋', '1413341197421846529', '500.00', '', 'c99e0aab-3cb7-4eaa-80fd-f47d4ffea694.png', '', '1', '0', '2021-07-09 11:39:35', '2021-07-09 15:12:18', '1', '1', '0');
INSERT INTO `dish` VALUES ('1413384757047271425', '王老吉', '1413341197421846529', '500.00', '', '00874a5e-0df2-446b-8f69-a30eb7d88ee8.png', '', '1', '0', '2021-07-09 14:29:20', '2021-07-12 09:09:16', '1', '1', '0');
INSERT INTO `dish` VALUES ('1413385247889891330', '米饭', '1413384954989060097', '200.00', '', 'ee04a05a-1230-46b6-8ad5-1a95b140fff3.png', '', '1', '0', '2021-07-09 14:31:17', '2021-07-11 16:35:26', '1', '1', '0');

-- ----------------------------
-- Table structure for dish_flavor
-- ----------------------------
DROP TABLE IF EXISTS `dish_flavor`;
CREATE TABLE `dish_flavor` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `dish_id` bigint(20) NOT NULL COMMENT '菜品',
  `name` varchar(64) COLLATE utf8_bin NOT NULL COMMENT '口味名称',
  `value` varchar(500) COLLATE utf8_bin DEFAULT NULL COMMENT '口味数据list',
  `create_time` datetime NOT NULL COMMENT '创建时间',
  `update_time` datetime NOT NULL COMMENT '更新时间',
  `create_user` bigint(20) NOT NULL COMMENT '创建人',
  `update_user` bigint(20) NOT NULL COMMENT '修改人',
  `is_deleted` int(11) NOT NULL DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='菜品口味关系表';

-- ----------------------------
-- Records of dish_flavor
-- ----------------------------
INSERT INTO `dish_flavor` VALUES ('1397849417888346113', '1397849417854791681', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:37:27', '2021-05-27 09:37:27', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397849739297861633', '1397849739276890114', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:38:43', '2021-05-27 09:38:43', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397849739323027458', '1397849739276890114', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:38:43', '2021-05-27 09:38:43', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397849936421761025', '1397849936404983809', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:39:30', '2021-05-27 09:39:30', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397849936438538241', '1397849936404983809', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:39:30', '2021-05-27 09:39:30', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397850141015715841', '1397850140982161409', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:40:19', '2021-05-27 09:40:19', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397850141040881665', '1397850140982161409', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:40:19', '2021-05-27 09:40:19', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397850392120307713', '1397850392090947585', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:41:19', '2021-05-27 09:41:19', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397850392137084929', '1397850392090947585', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:41:19', '2021-05-27 09:41:19', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397850630734262274', '1397850630700707841', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:42:16', '2021-05-27 09:42:16', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397850630755233794', '1397850630700707841', '辣度', '[\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:42:16', '2021-05-27 09:42:16', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397850851274960898', '1397850851245600769', '忌口', '[\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:43:08', '2021-05-27 09:43:08', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397850851283349505', '1397850851245600769', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:43:08', '2021-05-27 09:43:08', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397851099523231745', '1397851099502260226', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:44:08', '2021-05-27 09:44:08', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397851099527426050', '1397851099502260226', '辣度', '[\"不辣\",\"微辣\",\"中辣\"]', '2021-05-27 09:44:08', '2021-05-27 09:44:08', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397851370483658754', '1397851370462687234', '温度', '[\"热饮\",\"常温\",\"去冰\",\"少冰\",\"多冰\"]', '2021-05-27 09:45:12', '2021-05-27 09:45:12', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397851370483658755', '1397851370462687234', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:45:12', '2021-05-27 09:45:12', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397851370483658756', '1397851370462687234', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:45:12', '2021-05-27 09:45:12', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397851668283437058', '1397851668262465537', '温度', '[\"热饮\",\"常温\",\"去冰\",\"少冰\",\"多冰\"]', '2021-05-27 09:46:23', '2021-05-27 09:46:23', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397852391180120065', '1397852391150759938', '忌口', '[\"不要葱\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:49:16', '2021-05-27 09:49:16', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397852391196897281', '1397852391150759938', '辣度', '[\"不辣\",\"微辣\",\"重辣\"]', '2021-05-27 09:49:16', '2021-05-27 09:49:16', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397853183307984898', '1397853183287013378', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:52:24', '2021-05-27 09:52:24', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397853423486414850', '1397853423461249026', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:53:22', '2021-05-27 09:53:22', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397853709126905857', '1397853709101740034', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:54:30', '2021-05-27 09:54:30', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397853890283089922', '1397853890262118402', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:55:13', '2021-05-27 09:55:13', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397854133632413697', '1397854133603053569', '温度', '[\"热饮\",\"常温\",\"去冰\",\"少冰\",\"多冰\"]', '2021-05-27 09:56:11', '2021-05-27 09:56:11', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397854652623007745', '1397854652581064706', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 09:58:15', '2021-05-27 09:58:15', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397854652635590658', '1397854652581064706', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:58:15', '2021-05-27 09:58:15', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397854865735593986', '1397854865672679425', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 09:59:06', '2021-05-27 09:59:06', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397855742303186946', '1397855742273826817', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 10:02:35', '2021-05-27 10:02:35', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397855906497605633', '1397855906468245506', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 10:03:14', '2021-05-27 10:03:14', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397856190573621250', '1397856190540066818', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 10:04:21', '2021-05-27 10:04:21', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397859056709316609', '1397859056684150785', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 10:15:45', '2021-05-27 10:15:45', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397859277837217794', '1397859277812051969', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 10:16:37', '2021-05-27 10:16:37', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397859487502086146', '1397859487476920321', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 10:17:27', '2021-05-27 10:17:27', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397859757061615618', '1397859757036449794', '甜味', '[\"无糖\",\"少糖\",\"半躺\",\"多糖\",\"全糖\"]', '2021-05-27 10:18:32', '2021-05-27 10:18:32', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397860242086735874', '1397860242057375745', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 10:20:27', '2021-05-27 10:20:27', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397860963918065665', '1397860963880316929', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 10:23:19', '2021-05-27 10:23:19', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397861135754506242', '1397861135733534722', '甜味', '[\"无糖\",\"少糖\",\"半躺\",\"多糖\",\"全糖\"]', '2021-05-27 10:24:00', '2021-05-27 10:24:00', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397861370035744769', '1397861370010578945', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-27 10:24:56', '2021-05-27 10:24:56', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397861683459305474', '1397861683434139649', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 10:26:11', '2021-05-27 10:26:11', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397861898467717121', '1397861898438356993', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 10:27:02', '2021-05-27 10:27:02', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397862198054268929', '1397862198033297410', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-27 10:28:14', '2021-05-27 10:28:14', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1397862477835317250', '1397862477831122945', '辣度', '[\"不辣\",\"微辣\",\"中辣\"]', '2021-05-27 10:29:20', '2021-05-27 10:29:20', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398089545865015297', '1398089545676271617', '温度', '[\"热饮\",\"常温\",\"去冰\",\"少冰\",\"多冰\"]', '2021-05-28 01:31:38', '2021-05-28 01:31:38', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398089782323097601', '1398089782285348866', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:32:34', '2021-05-28 01:32:34', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398090003262255106', '1398090003228700673', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-28 01:33:27', '2021-05-28 01:33:27', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398090264554811394', '1398090264517062657', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-28 01:34:29', '2021-05-28 01:34:29', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398090455399837698', '1398090455324340225', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:35:14', '2021-05-28 01:35:14', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398090685449023490', '1398090685419663362', '温度', '[\"热饮\",\"常温\",\"去冰\",\"少冰\",\"多冰\"]', '2021-05-28 01:36:09', '2021-05-28 01:36:09', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398090825358422017', '1398090825329061889', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-28 01:36:43', '2021-05-28 01:36:43', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398091007051476993', '1398091007017922561', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:37:26', '2021-05-28 01:37:26', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398091296164851713', '1398091296131297281', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:38:35', '2021-05-28 01:38:35', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398091546531246081', '1398091546480914433', '忌口', '[\"不要葱\",\"不要蒜\",\"不要香菜\",\"不要辣\"]', '2021-05-28 01:39:35', '2021-05-28 01:39:35', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398091729809747969', '1398091729788776450', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:40:18', '2021-05-28 01:40:18', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398091889499484161', '1398091889449152513', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:40:56', '2021-05-28 01:40:56', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398092095179763713', '1398092095142014978', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:41:45', '2021-05-28 01:41:45', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398092283877306370', '1398092283847946241', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:42:30', '2021-05-28 01:42:30', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398094018939236354', '1398094018893099009', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:49:24', '2021-05-28 01:49:24', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1398094391494094850', '1398094391456346113', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-05-28 01:50:53', '2021-05-28 01:50:53', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1399574026165727233', '1399305325713600514', '辣度', '[\"不辣\",\"微辣\",\"中辣\",\"重辣\"]', '2021-06-01 03:50:25', '2021-06-01 03:50:25', '1399309715396669441', '1399309715396669441', '0');
INSERT INTO `dish_flavor` VALUES ('1413389540592263169', '1413384757047271425', '温度', '[\"常温\",\"冷藏\"]', '2021-07-12 09:09:16', '2021-07-12 09:09:16', '1', '1', '0');
INSERT INTO `dish_flavor` VALUES ('1413389684020682754', '1413342036832100354', '温度', '[\"常温\",\"冷藏\"]', '2021-07-09 15:12:18', '2021-07-09 15:12:18', '1', '1', '0');

-- ----------------------------
-- Table structure for employee
-- ----------------------------
DROP TABLE IF EXISTS `employee`;
CREATE TABLE `employee` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `name` varchar(32) COLLATE utf8_bin NOT NULL COMMENT '姓名',
  `username` varchar(32) COLLATE utf8_bin NOT NULL COMMENT '用户名',
  `password` varchar(64) COLLATE utf8_bin NOT NULL COMMENT '密码',
  `phone` varchar(11) COLLATE utf8_bin NOT NULL COMMENT '手机号',
  `sex` varchar(2) COLLATE utf8_bin NOT NULL COMMENT '性别',
  `id_number` varchar(18) COLLATE utf8_bin NOT NULL COMMENT '身份证号',
  `status` int(11) NOT NULL DEFAULT '1' COMMENT '状态 0:禁用，1:正常',
  `create_time` datetime NOT NULL COMMENT '创建时间',
  `update_time` datetime NOT NULL COMMENT '更新时间',
  `create_user` bigint(20) NOT NULL COMMENT '创建人',
  `update_user` bigint(20) NOT NULL COMMENT '修改人',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `idx_username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='员工信息';

-- ----------------------------
-- Records of employee
-- ----------------------------
INSERT INTO `employee` VALUES ('1', '管理员', 'admin', 'e10adc3949ba59abbe56e057f20f883e', '13812312312', '1', '110101199001010047', '1', '2021-05-06 17:20:07', '2021-05-10 02:24:09', '1', '1');

-- ----------------------------
-- Table structure for orders
-- ----------------------------
DROP TABLE IF EXISTS `orders`;
CREATE TABLE `orders` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `number` varchar(50) COLLATE utf8_bin DEFAULT NULL COMMENT '订单号',
  `status` int(11) NOT NULL DEFAULT '1' COMMENT '订单状态 1待付款，2待派送，3已派送，4已完成，5已取消',
  `user_id` bigint(20) NOT NULL COMMENT '下单用户',
  `address_book_id` bigint(20) NOT NULL COMMENT '地址id',
  `order_time` datetime NOT NULL COMMENT '下单时间',
  `checkout_time` datetime NOT NULL COMMENT '结账时间',
  `pay_method` int(11) NOT NULL DEFAULT '1' COMMENT '支付方式 1微信,2支付宝',
  `amount` decimal(10,2) NOT NULL COMMENT '实收金额',
  `remark` varchar(100) COLLATE utf8_bin DEFAULT NULL COMMENT '备注',
  `phone` varchar(255) COLLATE utf8_bin DEFAULT NULL,
  `address` varchar(255) COLLATE utf8_bin DEFAULT NULL,
  `user_name` varchar(255) COLLATE utf8_bin DEFAULT NULL,
  `consignee` varchar(255) COLLATE utf8_bin DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='订单表';

-- ----------------------------
-- Records of orders
-- ----------------------------

-- ----------------------------
-- Table structure for order_detail
-- ----------------------------
DROP TABLE IF EXISTS `order_detail`;
CREATE TABLE `order_detail` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `name` varchar(50) COLLATE utf8_bin DEFAULT NULL COMMENT '名字',
  `image` varchar(100) COLLATE utf8_bin DEFAULT NULL COMMENT '图片',
  `order_id` bigint(20) NOT NULL COMMENT '订单id',
  `dish_id` bigint(20) DEFAULT NULL COMMENT '菜品id',
  `setmeal_id` bigint(20) DEFAULT NULL COMMENT '套餐id',
  `dish_flavor` varchar(50) COLLATE utf8_bin DEFAULT NULL COMMENT '口味',
  `number` int(11) NOT NULL DEFAULT '1' COMMENT '数量',
  `amount` decimal(10,2) NOT NULL COMMENT '金额',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='订单明细表';

-- ----------------------------
-- Records of order_detail
-- ----------------------------

-- ----------------------------
-- Table structure for setmeal
-- ----------------------------
DROP TABLE IF EXISTS `setmeal`;
CREATE TABLE `setmeal` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `category_id` bigint(20) NOT NULL COMMENT '菜品分类id',
  `name` varchar(64) COLLATE utf8_bin NOT NULL COMMENT '套餐名称',
  `price` decimal(10,2) NOT NULL COMMENT '套餐价格',
  `status` int(11) DEFAULT NULL COMMENT '状态 0:停用 1:启用',
  `code` varchar(32) COLLATE utf8_bin DEFAULT NULL COMMENT '编码',
  `description` varchar(512) COLLATE utf8_bin DEFAULT NULL COMMENT '描述信息',
  `image` varchar(255) COLLATE utf8_bin DEFAULT NULL COMMENT '图片',
  `create_time` datetime NOT NULL COMMENT '创建时间',
  `update_time` datetime NOT NULL COMMENT '更新时间',
  `create_user` bigint(20) NOT NULL COMMENT '创建人',
  `update_user` bigint(20) NOT NULL COMMENT '修改人',
  `is_deleted` int(11) NOT NULL DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `idx_setmeal_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='套餐';

-- ----------------------------
-- Records of setmeal
-- ----------------------------
INSERT INTO `setmeal` VALUES ('1415580119015145474', '1413386191767674881', '儿童套餐A计划', '4000.00', '1', '', '', '61d20592-b37f-4d72-a864-07ad5bb8f3bb.jpg', '2021-07-15 15:52:55', '2021-07-15 15:52:55', '1415576781934608386', '1415576781934608386', '0');

-- ----------------------------
-- Table structure for setmeal_dish
-- ----------------------------
DROP TABLE IF EXISTS `setmeal_dish`;
CREATE TABLE `setmeal_dish` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `setmeal_id` varchar(32) COLLATE utf8_bin NOT NULL COMMENT '套餐id ',
  `dish_id` varchar(32) COLLATE utf8_bin NOT NULL COMMENT '菜品id',
  `name` varchar(32) COLLATE utf8_bin DEFAULT NULL COMMENT '菜品名称 （冗余字段）',
  `price` decimal(10,2) DEFAULT NULL COMMENT '菜品原价（冗余字段）',
  `copies` int(11) NOT NULL COMMENT '份数',
  `sort` int(11) NOT NULL DEFAULT '0' COMMENT '排序',
  `create_time` datetime NOT NULL COMMENT '创建时间',
  `update_time` datetime NOT NULL COMMENT '更新时间',
  `create_user` bigint(20) NOT NULL COMMENT '创建人',
  `update_user` bigint(20) NOT NULL COMMENT '修改人',
  `is_deleted` int(11) NOT NULL DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='套餐菜品关系';

-- ----------------------------
-- Records of setmeal_dish
-- ----------------------------
INSERT INTO `setmeal_dish` VALUES ('1415580119052894209', '1415580119015145474', '1397862198033297410', '老火靓汤', '49800.00', '1', '0', '2021-07-15 15:52:55', '2021-07-15 15:52:55', '1415576781934608386', '1415576781934608386', '0');
INSERT INTO `setmeal_dish` VALUES ('1415580119061282817', '1415580119015145474', '1413342036832100354', '北冰洋', '500.00', '1', '0', '2021-07-15 15:52:55', '2021-07-15 15:52:55', '1415576781934608386', '1415576781934608386', '0');
INSERT INTO `setmeal_dish` VALUES ('1415580119069671426', '1415580119015145474', '1413385247889891330', '米饭', '200.00', '1', '0', '2021-07-15 15:52:55', '2021-07-15 15:52:55', '1415576781934608386', '1415576781934608386', '0');

-- ----------------------------
-- Table structure for shopping_cart
-- ----------------------------
DROP TABLE IF EXISTS `shopping_cart`;
CREATE TABLE `shopping_cart` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `name` varchar(50) COLLATE utf8_bin DEFAULT NULL COMMENT '名称',
  `image` varchar(100) COLLATE utf8_bin DEFAULT NULL COMMENT '图片',
  `user_id` bigint(20) NOT NULL COMMENT '主键',
  `dish_id` bigint(20) DEFAULT NULL COMMENT '菜品id',
  `setmeal_id` bigint(20) DEFAULT NULL COMMENT '套餐id',
  `dish_flavor` varchar(50) COLLATE utf8_bin DEFAULT NULL COMMENT '口味',
  `number` int(11) NOT NULL DEFAULT '1' COMMENT '数量',
  `amount` decimal(10,2) NOT NULL COMMENT '金额',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='购物车';

-- ----------------------------
-- Records of shopping_cart
-- ----------------------------

-- ----------------------------
-- Table structure for user
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user` (
  `id` bigint(20) NOT NULL COMMENT '主键',
  `name` varchar(50) COLLATE utf8_bin DEFAULT NULL COMMENT '姓名',
  `phone` varchar(100) COLLATE utf8_bin NOT NULL COMMENT '手机号',
  `sex` varchar(2) COLLATE utf8_bin DEFAULT NULL COMMENT '性别',
  `id_number` varchar(18) COLLATE utf8_bin DEFAULT NULL COMMENT '身份证号',
  `avatar` varchar(500) COLLATE utf8_bin DEFAULT NULL COMMENT '头像',
  `status` int(11) DEFAULT '0' COMMENT '状态 0:禁用，1:正常',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT='用户信息';
```
导入表结构，既可以使用Navicat这种图形化界面，也可使用MySQL命令（此时SQL文件不要放在中文目录中）：
```sql
> use reggie;
Database changed
> source db_reggie.sql
```
数据表：分类表（前端都是分类展示的）；套餐是菜品的集合，和菜品有关系表，菜品和不同的口味有关系。
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303031814735.png)

## Maven项目
创建一个常规的Maven环境，然后使用下面的配置文件，因为是SpringBoot项目：
```xml
<?xml version="1.0" encoding="UTF-8"?>  
<project xmlns="http://maven.apache.org/POM/4.0.0"  
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">  
  
    <parent>  
        <groupId>org.springframework.boot</groupId>  
        <artifactId>spring-boot-starter-parent</artifactId>  
        <version>2.4.5</version>  
        <relativePath/> <!-- lookup parent from repository -->  
    </parent>  
  
    <groupId>com.zhang</groupId>  
    <artifactId>reggie_take_out</artifactId>  
    <version>1.0-SNAPSHOT</version>  
    <modelVersion>4.0.0</modelVersion>  
    <properties>  
        <java.version>1.8</java.version>  
        <maven.compiler.source>19</maven.compiler.source>  
        <maven.compiler.target>19</maven.compiler.target>  
    </properties>  
    <dependencies>  
  
        <dependency>  
            <groupId>org.springframework.boot</groupId>  
            <artifactId>spring-boot-starter</artifactId>  
        </dependency>  
  
        <dependency>  
            <groupId>org.springframework.boot</groupId>  
            <artifactId>spring-boot-starter-test</artifactId>  
            <scope>test</scope>  
        </dependency>  
  
        <dependency>  
            <groupId>org.springframework.boot</groupId>  
            <artifactId>spring-boot-starter-web</artifactId>  
            <scope>compile</scope>  
        </dependency>  
  
        <dependency>  
            <groupId>com.baomidou</groupId>  
            <artifactId>mybatis-plus-boot-starter</artifactId>  
            <version>3.4.2</version>  
        </dependency>  
  
        <dependency>  
            <groupId>org.projectlombok</groupId>  
            <artifactId>lombok</artifactId>  
            <version>1.18.20</version>  
        </dependency>  
  
        <dependency>  
            <groupId>com.alibaba</groupId>  
            <artifactId>fastjson</artifactId>  
            <version>1.2.76</version>  
        </dependency>  
  
        <dependency>  
            <groupId>commons-lang</groupId>  
            <artifactId>commons-lang</artifactId>  
            <version>2.6</version>  
        </dependency>  
  
        <dependency>  
            <groupId>mysql</groupId>  
            <artifactId>mysql-connector-java</artifactId>  
            <scope>runtime</scope>  
        </dependency>  
  
        <dependency>  
            <groupId>com.alibaba</groupId>  
            <artifactId>druid-spring-boot-starter</artifactId>  
            <version>1.1.23</version>  
        </dependency>  
  
    </dependencies>  
  
    <build>  
        <plugins>  
            <plugin>  
                <groupId>org.springframework.boot</groupId>  
                <artifactId>spring-boot-maven-plugin</artifactId>  
                <version>2.4.5</version>  
            </plugin>  
        </plugins>  
    </build>  
  
</project>
```
注意：对于SpringBoot中没有配置版本信息的依赖，需要自己配置版本信息。
```yaml
server:  
  port: 8080  
spring:  
  application: # 应用名称,可选  
    name: reggie_take_out  
  datasource:  
    druid:  
      driver-class-name: com.mysql.cj.jdbc.Driver  
      url: jdbc:mysql://localhost:3306/reggie?serverTimezone=Asia/Shanghai&useUnicode=true&characterEncoding=utf-8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowPublicKeyRetrieval=true  
      username: root  
      password: wdmysqlmm123  
  
mybatis-plus:  
  configuration:  
    #在映射实体或者属性时，将数据库中表名和字段名中的下划线去掉，按照驼峰命名法映射  
    map-underscore-to-camel-case: true  
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  
  global-config:  
    db-config:  
      id-type: ASSIGN_ID
```
编写SpringBoot引导类：
```java
package com.memcpy0.reggie;  
  
import lombok.extern.slf4j.Slf4j;  
import org.springframework.boot.SpringApplication;  
import org.springframework.boot.autoconfigure.SpringBootApplication;  
  
@Slf4j  
@SpringBootApplication  
public class ReggieApplication {  
    public static void main(String[] args) {  
        SpringApplication.run(ReggieApplication.class, args);  
        log.info("项目启动成功");  
    }    
}
```

# P6 
静态资源要么放在resources/static/template文件夹中，或者修改默认的静态资源访问路径，用一个配置类（可以实现接口WebMvcConfigurer接口）、并放行。

当静态资源放在webapp下面的时候，可直接通过浏览器访问，不需要配置映射，安全性略低。

不建议直接继承这个类WebMvcConfigurationSupport配置，这样会让springboot自动配置失效？
什么鬼？springboot配置静态资源映射不是配置文件一句话的事么？
这是ssm的东西  springboot已经帮你配置好了 就算改也是在配置文件中改
直接创建SpringBoot工程，导入web依赖，放在static目录就可以了

我直接创建springboot 了，再搞maven也得改
SpringBoot项目用SpringMVC的配置方式，真有你的
Alt+Insert
```java
package com.memcpy0.reggie.config;  
//import org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;  
import org.springframework.context.annotation.Configuration;  
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;  
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;  
  
@Configuration  
public class WebMvcConfig implements WebMvcConfigurer {  
    /**  
     * 静态资源映射  
     * @param registry  
     */  
    @Override  
    public void addResourceHandlers(ResourceHandlerRegistry registry) { // 静态资源访问路径  
        registry.addResourceHandler("/backend/**").addResourceLocations("classpath:/backend/");  
        registry.addResourceHandler("/front/**").addResourceLocations("classpath:/front/");  
  
        WebMvcConfigurer.super.addResourceHandlers(registry);  
    }  
}
```

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303121818970.png)


# 7. 后台登录功能分析
## 7.1 需求分析
登录，发送请求。页面位置：resources/page/login/login.html
## 7.2 后台登录功能开发
1）创建实体类Employee，和employee表进行映射
2）创建Controller、Service、Mapper
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303161719400.png)

3）导入返回结果类R
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303161738168.png)
4）在Controller中创建登录方法
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303161754620.png)
页面等待响应有超时时间！
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303161903876.png)

## 7.3 拦截对非登录页面的请求
完善登录功能，必须登录成功才能进入后台系统。
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162146794.png)
实现步骤：
1.创建自定义过滤器LoginCheckFilter
2.在启动类上加入注解@ServletComponentScan
3.完善过滤器的处理逻辑
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162157206.png)
检查是否匹配路径，然后过滤器处理。

前端拦截器配合：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162212514.png)

前端调试：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162224009.png)

# 8. 后台退出功能分析
右上角的管理员信息是怎么显示的？**会话跟踪**！存储在window.localStorage

用户点击页面中退出按钮，发送请求，请求地址为/employee/logout，请求方式为POST

我们只需要在Controller中创建对应的处理方法即可。具体的处理逻辑是：
1. 清理Session中的用户ID
2. 返回结果

Session就是服务端的一个Map和浏览器端的Cookie记录！
# 9. 后台菜单及界面切换
通过嵌入IFrame、切换菜单项ID和URL显示新页面，v-for遍历生成左边菜单栏
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162132282.png)

# 10. 员工管理
## 10.1 添加员工
后台系统中可以管理员工信息，通过新增员工来添加后台系统用户。点击[添加员工]按钮跳转到新增页面，如下：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162142990.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162236387.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162238234.png)

有问题：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162301751.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162332589.png)
流程如下：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162335200.png)

## 10.2 员工信息分页查询
### 需求分析
系统中员工很多时，如果在一个页面中全部展示出来，不便于查看，所以一般的系统中以分页的方式来展示列表数据。
### 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162341580.png)
全局前端拦截器：将以GET发送的param（是JSON）组装到URL后面：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303162346580.png)

### 功能测试

## 10.3 启用/禁用员工账号
### 需求分析
在员工管理列表页面，可以对某个员工账号进行启用或禁用。账号禁用的员工不能登录系统，启用后的员工可以正常登录。需要注意，只有管理员可以对其他普通用户进行启用、禁用操作，所以普通用户登录系统后启用、禁用按钮不显示。

管理员admin登录系统，可以对所有员工账号进行启/禁用操作。如果某个员工账号状态为正常，则按钮显示为禁用，如果员工账号状态为已禁用，则按钮显示为启用。普通用户无法看到按钮。
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303170049687.png)
前端实现：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303170052314.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303170053212.png)

查看请求：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303170057007.png)

前端方法statusHandle(row)，弹窗、然后执行enableDisableEmployee，三目运算符；
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303170059220.png)

### 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303170106277.png)
这本质是更新员工信息，可复用来改变员工其他信息。
### 功能测试
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303170131690.png)
这其实是JS的问题。JS数字丢失了精度。代码修复：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303170133417.png)
### 代码修复

配置消息转换器（SpringMVC的一个组件）：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303170152219.png)
在WebMvcConfig中定义一个新转换器（与@ResponseBody，@RequestBody有关吗？）
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171024938.png)

## 10.4 编辑员工信息
在员工管理列表页面点击编辑按钮，跳转到编辑页面，在编辑页面回显员工信息并进行修改，最后点击按钮完成编辑操作：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171041154.png)
新增页面实际上是公共页面：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171044493.png)

# 11. 公共字段自动填充
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171226358.png)
MyBatisPlus公共字段自动填充，也就是在插入或更新时为指定字段赋予指定值，使用它的好处是可以统一对这些字段进行处理，避免了重复代码。实现步骤：
1. 在实体类的属性上加入@TableField注解，指定自动填充的策略
2. ==按照框架要求，编写元数据对象处理器，在此类中统一为公共字段赋值，此类需要实现MetaObjectHandler接口==。
	![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171242988.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171303725.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171307288.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171309530.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171314343.png)

# 12. 分类管理
## 12.1 需求分析
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171118844.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171346960.png)


![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171348515.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171349703.png)


## 12.2 代码开发
排序字段是展示时的排序字段。
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171611147.png)

## 12.3 分类信息分页
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171635590.png)

---
# 13. 删除分类
## 13.1 基本功能
在分类管理列表页面，可以对某个分类进行删除操作。需要注意的是，当分类关联了菜品或套餐时，此分类不允许删除。
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171638463.png)
## 13.2 功能完善（自定义异常+逻辑删除）
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303171649892.png)

这里为什么super我解释一下，直接注入categoryService当然也可以，但你看看当前这个类，是不是有extend，super指的父，所以直接这样也是可以的，懂的点赞父类 是CategoryService 接口继承 `IService<Category>` 实现的removeById

这里CategoryService继承了IService，要在CategoryServiceImpl中OverrideIService的removeById方法，必须在CategoryService接口中重新拉取IService的removeById方法声明。

一切都是为了逻辑删除，不然没必要自定义异常

异常抛出是抛到调用它的地方，然后被自定义的统一异常处理获取发送到页面
这里的后端形参要改为ids
后端形参要改为ids，不然映射不了前端参数ids的值

# 14. 分析页面回显+修改分类
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172029756.png)


---
# 15. 菜品管理
## 15.1 文件上传下载
必须满足Form表单的要求！
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172032917.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172034683.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172038773.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172040803.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172042793.png)

这里可以使用@RequestPart("file") ，这样形参可以随意起名

可以在后端重定向，老师是在前端拦截器那里重定向了
这里上传没有登录，前端收到响应却没有跳转的原因是：**前端拦截器拦截的是axios请求的响应，上传不是用的axios，因此响应不会被前端拦截，也就不会跳转**
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172234399.png)

## 15.2 新增菜品
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172251122.png)
新增菜品，就是将新增页面录入的菜品信息插入到dish表中，如果添加了口味做法，还需向dish_flavor表插入数据。所以在新增菜品时，涉及到两个表：
- dish：菜品表
- dish_flavor：菜品口味表

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172255396.png)
菜品dish表，status停售起售：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172256360.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172300698.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172258929.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172305621.png)

先加载菜品分类数据 CategoryController.list，显示在下拉框
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303182245301.png)

只显示name是因为前端显示的时候只要了prop=name
妙啊，由前端传来的不同的type查询，后端只要一个查询方法就行，减少代码冗余，提高了复用性
保存后就将这个图片的路径写入数据库阿，那里只是用流来回显而已
使用云存储保存图片除了上传的时候其他地方都是直接传递一个链接，直接用就行了


![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172343803.png)

### 梳理代码交互过程
这里说一下，以分为单位是为了防止出现小数而导致精度丢失
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172326372.png)
数据比较复杂，前端传过来的flavor是对象数组的嵌套，需要封装另外一个类。把所有的参数接收到


![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303172344704.png)
DTO，数据传输对象，一般用于展示层与服务层之间的数据传输。
在DishController中接收添加的菜品数据，前面都是用实体类。

## 15.3 菜品信息分页查询 ※※※
### 需求分析
展示图片，展示分类（需要查询菜品分类表）
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303182332922.png)

查询按钮会发送菜品名称！

### 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303182336179.png)
返回的JSON中，菜品分类只是ID，需要改善。没有CategoryName字段。`Page<Dish>` 不满足要求，需要 `Page<DishDto>`（里面有CategoryName）

分页数据中，pageInfo.records就是查询出来的分页数据：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303190008242.png)

前端图片查询代码：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303190014946.png)

## 15.4 修改菜品
### 需求分析
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303190015110.png)
### 代码开发
页面的图片请求不是AJAX请求，而是普通请求！
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303190016840.png)

具体代码：`<el-option v-for="(item,index) in dishList" :key="index" :label="item.name" :value="item.id" />`
v-model 绑定了 categoryId   调用 接口的时候给 categoryId赋值了，所以 就匹配回显了
下面是保存的请求：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303190214572.png)
有可能是新增的口味？
遍历flavors，根据有无dishId判断是否是新增口味，是的话就调口味的save方法，不是就调update

因为有多个口味，表数据不好对应，所以直接删除方便
saveOrUpdateBatch（可解决？）
我懂了，假如这个菜品本来是两个口味，你修改后只剩一个了，所以先删除再添加
菜品id直接修改不可以，这里操作口味id，但是之前**插入的口味id可能只有忌口，如果修改的时候增加了别的口味，就没有办法根据口味id修改了**
因为是一对多的关系，之前的多条和现在的不一定对应。网页上完全可以把你之前的全删了加新的，你怎么修改呢？只有全删了然后全加上
哈哈哈可别信他们 你要是原本两条多加一条 多的那条就没dishid
兄弟们记住，这里前端传来的口味可能已经带了ID，需要先判断，如果已经存在就把ID设置为null，不然会和ID自动生成相矛盾报错
对的，已存在的flavor不需要设dishId，新加的口味需要设，否则: Field 'dish_id' doesn't have a default value
如果加了逻辑删除，这里的口味id要设置为null，让数据库自动生成，不然如果存在修改前的口味，会报主键重复异常


---
# 16. 套餐管理业务开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191010886.png)

## 16.1 新增套餐
### 16.1.1 需求分析
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191014703.png)
新增套餐，就是将新增页面录入的套餐信息插入到setmeal表，还需要向setmeal_dish表插入套餐和菜品关联数据。
所以在新增套餐时涉及到两个表：
- setmeal 套餐表
- setmea_dish 套餐菜品关系表

### 16.1.2 数据模型
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191019141.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191019420.png)
### 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191148295.png)

## 16.2 套餐信息分页查询
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191341871.png)
### 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191405814.png)

## 16.3 删除套餐
### 需求分析

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191556146.png)
### 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191600995.png)

## 16.4 修改套餐

## 16.5 起售、批量停售
停售也需要逻辑，比如在售套餐中的菜品不允许停售，批量停售的时候哪些菜品不能停售需要在页面提示出来，所以说不是那么容易


---
# 17. 手机验证码登录
## 17.1 短信发送
### 17.1.1 短信服务介绍
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191755198.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191756207.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191758854.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191823037.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191824243.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191826141.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191827964.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191827170.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191828577.png)
授权：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191830748.png)
### 代码开发
使用阿里云API发送短信：
1. 导入Maven坐标
2. 模板代码
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303191836224.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192008468.png)

### 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192010992.png)


## 手机验证码登录
### 需求分析
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192013869.png)
### 数据模型
phone为电话，登录时自动注册
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192016901.png)
### 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192019144.png)
SMSUtils，User，UserMapper，UserService，UserServiceImpl，UserController
ValidateCodeUtils

修改LoginCheckFilter：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192020754.png)
手机模式来调试！额外判断移动端用户，用user区分！
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192025154.png)
前端获取验证码方法：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192027673.png)
后台：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192104837.png)
### 验证码校验
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192143093.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192206135.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192207312.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192213396.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192334104.png)

---
# 菜品展示、购物车、下单
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192217080.png)
### 01 导入用户地址簿相关功能代码
### 需求分析
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192225904.png)



### 数据模型
label标识是公司、学习还是家；必填的是打钩的
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192225163.png)
### 导入功能代码
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303192227740.png)


### 功能测试


---
## 02 菜品展示
### 需求分析
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200034170.png)
### 代码分析
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200034931.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200042688.png)
改造：DishController list方法！以展示「选择规格按钮」。


---
## 03 购物车
### 需求分析
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200237307.png)

### 数据模型
name要么是菜品名，要么是套餐名：
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200238010.png)

### 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200242598.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200243835.png)


---
# 用户下单
## 需求分析
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200330414.png)

## 数据模型
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200331033.png)

![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200332186.png)
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200333062.png)

## 代码开发
![](https://image-1307616428.cos.ap-beijing.myqcloud.com/Obsidian/202303200338440.png)
知道了当前用户是谁，可直接从Session/BaseContext中获得用户ID和购物车数据（从数据库）
## 功能测试


---
